
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>scrapy · python_book</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="appwhy">
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-base16-ateliersulphurpool.light.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="常见问题.html" />
    
    
    <link rel="prev" href="requests.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://github.com/appwhy" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../django/django.html">
            
                <a href="../django/django.html">
            
                    
                    django
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../nlp/NLP.html">
            
                <a href="../nlp/NLP.html">
            
                    
                    nlp
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../nlp/NLP 相关算法.html">
            
                <a href="../nlp/NLP 相关算法.html">
            
                    
                    NLP 相关算法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../python/python.html">
            
                <a href="../python/python.html">
            
                    
                    python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../python/python其他库.html">
            
                <a href="../python/python其他库.html">
            
                    
                    python其他库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../python/python常用库.html">
            
                <a href="../python/python常用库.html">
            
                    
                    python常用库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../python/python环境.html">
            
                <a href="../python/python环境.html">
            
                    
                    python环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../python/基础知识.html">
            
                <a href="../python/基础知识.html">
            
                    
                    基础知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../python/常用知识点.html">
            
                <a href="../python/常用知识点.html">
            
                    
                    常用知识点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="../python/常见问题.html">
            
                <a href="../python/常见问题.html">
            
                    
                    常见问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <span>
            
                    
                    其他
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../其他/数据库.html">
            
                <a href="../其他/数据库.html">
            
                    
                    数据库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="爬虫.html">
            
                <a href="爬虫.html">
            
                    
                    爬虫
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="bs4.html">
            
                <a href="bs4.html">
            
                    
                    bs4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="requests.html">
            
                <a href="requests.html">
            
                    
                    requests
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.1.3" data-path="scrapy.html">
            
                <a href="scrapy.html">
            
                    
                    scrapy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="常见问题.html">
            
                <a href="常见问题.html">
            
                    
                    常见问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >scrapy</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#scrapy"><b>1. </b>scrapy</a></li><ul><li><span class="title-icon "></span><a href="#&#x4E00;&#x4E9B;&#x5C0F;&#x77E5;&#x8BC6;&#x70B9;"><b>1.1. </b>&#x4E00;&#x4E9B;&#x5C0F;&#x77E5;&#x8BC6;&#x70B9;</a></li><li><span class="title-icon "></span><a href="#scrapy&#x547D;&#x4EE4;"><b>1.2. </b>scrapy&#x547D;&#x4EE4;</a></li><ul><li><span class="title-icon "></span><a href="#&#x67E5;&#x770B;scrapy&#x76F8;&#x5173;&#x4FE1;&#x606F;"><b>1.2.1. </b>&#x67E5;&#x770B;scrapy&#x76F8;&#x5173;&#x4FE1;&#x606F;</a></li><li><span class="title-icon "></span><a href="#&#x521B;&#x5EFA;&#x722C;&#x866B;"><b>1.2.2. </b>&#x521B;&#x5EFA;&#x722C;&#x866B;</a></li><li><span class="title-icon "></span><a href="#&#x542F;&#x52A8;&#x722C;&#x866B;"><b>1.2.3. </b>&#x542F;&#x52A8;&#x722C;&#x866B;</a></li><li><span class="title-icon "></span><a href="#&#x4E3A;&#x722C;&#x866B;&#x6DFB;&#x52A0;&#x53C2;&#x6570;"><b>1.2.4. </b>&#x4E3A;&#x722C;&#x866B;&#x6DFB;&#x52A0;&#x53C2;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x4E3A;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x53C2;&#x6570;"><b>1.2.5. </b>&#x4E3A;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x53C2;&#x6570;</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;"><b>1.2.6. </b>&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;</a></li><li><span class="title-icon "></span><a href="#&#x66FF;&#x6362;starturls"><b>1.2.7. </b>&#x66FF;&#x6362;start_urls</a></li><li><span class="title-icon "></span><a href="#&#x542F;&#x52A8;&#x722C;&#x866B;&#xFF0C;&#x4F46;&#x53EA;&#x722C;&#x53D6;&#x90E8;&#x5206;&#x6570;&#x636E;"><b>1.2.8. </b>&#x542F;&#x52A8;&#x722C;&#x866B;&#xFF0C;&#x4F46;&#x53EA;&#x722C;&#x53D6;&#x90E8;&#x5206;&#x6570;&#x636E;</a></li><li><span class="title-icon "></span><a href="#&#x6682;&#x505C;scrapy&#x722C;&#x866B;&#x6267;&#x884C;"><b>1.2.9. </b>&#x6682;&#x505C;scrapy&#x722C;&#x866B;&#x6267;&#x884C;</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;&#x811A;&#x672C;&#x542F;&#x52A8;scrapy&#x722C;&#x866B;"><b>1.2.10. </b>&#x4F7F;&#x7528;&#x811A;&#x672C;&#x542F;&#x52A8;scrapy&#x722C;&#x866B;</a></li><li><span class="title-icon "></span><a href="#&#x5BFC;&#x51FA;&#x6570;&#x636E;"><b>1.2.11. </b>&#x5BFC;&#x51FA;&#x6570;&#x636E;</a></li><li><span class="title-icon "></span><a href="#&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x722C;&#x866B;"><b>1.2.12. </b>&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x722C;&#x866B;</a></li></ul><li><span class="title-icon "></span><a href="#&#x76F8;&#x5173;&#x7C7B;&#x8BF4;&#x660E;"><b>1.3. </b>&#x76F8;&#x5173;&#x7C7B;&#x8BF4;&#x660E;</a></li><ul><li><span class="title-icon "></span><a href="#1-request&#xFF08;scrapyhttprequestrequest&#xFF09;"><b>1.3.1. </b>1. Request&#xFF08;scrapy.http.request.Request&#xFF09;</a></li><li><span class="title-icon "></span><a href="#2-response&#xFF08;scrapyhttpresponseresponse&#xFF09;"><b>1.3.2. </b>2. Response&#xFF08;scrapy.http.response.Response&#xFF09;</a></li><li><span class="title-icon "></span><a href="#3-&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;spider&#xFF08;&#x7EE7;&#x627F;scrapyspider&#xFF09;"><b>1.3.3. </b>3. &#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;Spider&#xFF08;&#x7EE7;&#x627F;scrapy.Spider&#xFF09;</a></li><li><span class="title-icon "></span><a href="#4-&#x5176;&#x4ED6;"><b>1.3.4. </b>4. &#x5176;&#x4ED6;</a></li></ul><li><span class="title-icon "></span><a href="#&#x6570;&#x636E;&#x63D0;&#x53D6;"><b>1.4. </b>&#x6570;&#x636E;&#x63D0;&#x53D6;</a></li><ul><li><span class="title-icon "></span><a href="#1-xpath&#x9009;&#x62E9;&#x5668;"><b>1.4.1. </b>1. xpath&#x9009;&#x62E9;&#x5668;</a></li><li><span class="title-icon "></span><a href="#2-css&#x9009;&#x62E9;&#x5668;"><b>1.4.2. </b>2. css&#x9009;&#x62E9;&#x5668;</a></li><li><span class="title-icon "></span><a href="#3-re"><b>1.4.3. </b>3. re</a></li><li><span class="title-icon "></span><a href="#4-linkextractor&#xFF1A;&#x53EA;&#x63D0;&#x53D6;&#x94FE;&#x63A5;"><b>1.4.4. </b>4. LinkExtractor&#xFF1A;&#x53EA;&#x63D0;&#x53D6;&#x94FE;&#x63A5;</a></li></ul><li><span class="title-icon "></span><a href="#item&#x5C01;&#x88C5;&#x6570;&#x636E;"><b>1.5. </b>item&#x5C01;&#x88C5;&#x6570;&#x636E;</a></li><ul><li><span class="title-icon "></span><a href="#itemloader"><b>1.5.1. </b>ItemLoader</a></li></ul><li><span class="title-icon "></span><a href="#pipeline"><b>1.6. </b>pipeline</a></li><ul><li><span class="title-icon "></span><a href="#1-filespipeline"><b>1.6.1. </b>1. FilesPipeline</a></li><li><span class="title-icon "></span><a href="#2-imagespipeline"><b>1.6.2. </b>2. ImagesPipeline</a></li></ul><li><span class="title-icon "></span><a href="#extension"><b>1.7. </b>extension</a></li><ul><li><span class="title-icon "></span><a href="#1-exporter"><b>1.7.1. </b>1. Exporter</a></li></ul><li><span class="title-icon "></span><a href="#&#x6A21;&#x62DF;&#x767B;&#x9646;"><b>1.8. </b>&#x6A21;&#x62DF;&#x767B;&#x9646;</a></li><ul><li><span class="title-icon "></span><a href="#1-&#x6784;&#x9020;&#x8868;&#x5355;"><b>1.8.1. </b>1. &#x6784;&#x9020;&#x8868;&#x5355;</a></li><li><span class="title-icon "></span><a href="#2-&#x4F7F;&#x7528;cookie"><b>1.8.2. </b>2. &#x4F7F;&#x7528;Cookie</a></li></ul><li><span class="title-icon "></span><a href="#&#x6570;&#x636E;&#x5B58;&#x50A8;"><b>1.9. </b>&#x6570;&#x636E;&#x5B58;&#x50A8;</a></li><ul><li><span class="title-icon "></span><a href="#1-sqlite"><b>1.9.1. </b>1. SQLite</a></li><li><span class="title-icon "></span><a href="#2-mysql"><b>1.9.2. </b>2. mysql</a></li><li><span class="title-icon "></span><a href="#3-mongodb"><b>1.9.3. </b>3. mongodb</a></li><li><span class="title-icon "></span><a href="#4-redis"><b>1.9.4. </b>4. Redis</a></li><li><span class="title-icon "></span><a href="#5-&#x5F02;&#x6B65;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;"><b>1.9.5. </b>5. &#x5F02;&#x6B65;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;</a></li></ul><li><span class="title-icon "></span><a href="#&#x7F51;&#x7EDC;&#x4EE3;&#x7406;"><b>1.10. </b>&#x7F51;&#x7EDC;&#x4EE3;&#x7406;</a></li><li><span class="title-icon "></span><a href="#&#x4E2D;&#x95F4;&#x4EF6;"><b>1.11. </b>&#x4E2D;&#x95F4;&#x4EF6;</a></li><ul><li><span class="title-icon "></span><a href="#1-&#x4E0B;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;"><b>1.11.1. </b>1. &#x4E0B;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;</a></li><li><span class="title-icon "></span><a href="#2-&#x722C;&#x866B;&#x4E2D;&#x95F4;&#x4EF6;"><b>1.11.2. </b>2. &#x722C;&#x866B;&#x4E2D;&#x95F4;&#x4EF6;</a></li></ul><li><span class="title-icon "></span><a href="#settings"><b>1.12. </b>settings</a></li><ul><li><span class="title-icon "></span><a href="#customsettings"><b>1.12.1. </b>custom_settings</a></li><li><span class="title-icon "></span><a href="#settings&#x7684;&#x4F7F;&#x7528;&#x6280;&#x5DE7;"><b>1.12.2. </b>settings&#x7684;&#x4F7F;&#x7528;&#x6280;&#x5DE7;</a></li></ul><li><span class="title-icon "></span><a href="#&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;"><b>1.13. </b>&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;</a></li><li><span class="title-icon "></span><a href="#scrapy&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;"><b>1.14. </b>scrapy&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;</a></li><li><span class="title-icon "></span><a href="#&#x722C;&#x866B;&#x90E8;&#x7F72;"><b>1.15. </b>&#x722C;&#x866B;&#x90E8;&#x7F72;</a></li><li><span class="title-icon "></span><a href="#telnet"><b>1.16. </b>telnet</a></li></ul></ul></div><a href="#scrapy" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="scrapy"><a name="scrapy" class="anchor-navigation-ex-anchor" href="#scrapy"><i class="fa fa-link" aria-hidden="true"></i></a>1. scrapy</h1>
<p>[TOC]</p>
<!-- toc -->
<ul>
<li><a href="#%E4%B8%80%E4%BA%9B%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9">&#x4E00;&#x4E9B;&#x5C0F;&#x77E5;&#x8BC6;&#x70B9;</a></li>
<li><a href="#scrapy%E5%91%BD%E4%BB%A4">scrapy&#x547D;&#x4EE4;</a><ul>
<li><a href="#%E6%9F%A5%E7%9C%8Bscrapy%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF">&#x67E5;&#x770B;scrapy&#x76F8;&#x5173;&#x4FE1;&#x606F;</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA%E7%88%AC%E8%99%AB">&#x521B;&#x5EFA;&#x722C;&#x866B;</a></li>
<li><a href="#%E5%90%AF%E5%8A%A8%E7%88%AC%E8%99%AB">&#x542F;&#x52A8;&#x722C;&#x866B;</a></li>
<li><a href="#%E4%B8%BA%E7%88%AC%E8%99%AB%E6%B7%BB%E5%8A%A0%E5%8F%82%E6%95%B0">&#x4E3A;&#x722C;&#x866B;&#x6DFB;&#x52A0;&#x53C2;&#x6570;</a></li>
<li><a href="#%E4%B8%BA%E9%A1%B9%E7%9B%AE%E6%B7%BB%E5%8A%A0%E5%8F%82%E6%95%B0">&#x4E3A;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x53C2;&#x6570;</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95">&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;</a></li>
<li><a href="#%E6%9B%BF%E6%8D%A2start_urls">&#x66FF;&#x6362;start_urls</a></li>
<li><a href="#%E5%90%AF%E5%8A%A8%E7%88%AC%E8%99%AB%E4%BD%86%E5%8F%AA%E7%88%AC%E5%8F%96%E9%83%A8%E5%88%86%E6%95%B0%E6%8D%AE">&#x542F;&#x52A8;&#x722C;&#x866B;&#xFF0C;&#x4F46;&#x53EA;&#x722C;&#x53D6;&#x90E8;&#x5206;&#x6570;&#x636E;</a></li>
<li><a href="#%E6%9A%82%E5%81%9Cscrapy%E7%88%AC%E8%99%AB%E6%89%A7%E8%A1%8C">&#x6682;&#x505C;scrapy&#x722C;&#x866B;&#x6267;&#x884C;</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E5%90%AF%E5%8A%A8scrapy%E7%88%AC%E8%99%AB">&#x4F7F;&#x7528;&#x811A;&#x672C;&#x542F;&#x52A8;scrapy&#x722C;&#x866B;</a></li>
<li><a href="#%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE">&#x5BFC;&#x51FA;&#x6570;&#x636E;</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%E7%88%AC%E8%99%AB">&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x722C;&#x866B;</a></li>
</ul>
</li>
<li><a href="#%E7%9B%B8%E5%85%B3%E7%B1%BB%E8%AF%B4%E6%98%8E">&#x76F8;&#x5173;&#x7C7B;&#x8BF4;&#x660E;</a><ul>
<li><a href="#1-requestscrapyhttprequestrequest">1. Request&#xFF08;scrapy.http.request.Request&#xFF09;</a></li>
<li><a href="#2-responsescrapyhttpresponseresponse">2. Response&#xFF08;scrapy.http.response.Response&#xFF09;</a></li>
<li><a href="#3-%E8%87%AA%E5%B7%B1%E7%BC%96%E5%86%99%E7%9A%84spider%E7%BB%A7%E6%89%BFscrapyspider">3. &#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;Spider&#xFF08;&#x7EE7;&#x627F;scrapy.Spider&#xFF09;</a></li>
<li><a href="#4-%E5%85%B6%E4%BB%96">4. &#x5176;&#x4ED6;</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96">&#x6570;&#x636E;&#x63D0;&#x53D6;</a><ul>
<li><a href="#1-xpath%E9%80%89%E6%8B%A9%E5%99%A8">1. xpath&#x9009;&#x62E9;&#x5668;</a></li>
<li><a href="#2-css%E9%80%89%E6%8B%A9%E5%99%A8">2. css&#x9009;&#x62E9;&#x5668;</a></li>
<li><a href="#3-re">3. re</a></li>
<li><a href="#4-linkextractor%E5%8F%AA%E6%8F%90%E5%8F%96%E9%93%BE%E6%8E%A5">4. LinkExtractor&#xFF1A;&#x53EA;&#x63D0;&#x53D6;&#x94FE;&#x63A5;</a></li>
</ul>
</li>
<li><a href="#item%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE">item&#x5C01;&#x88C5;&#x6570;&#x636E;</a><ul>
<li><a href="#itemloader">ItemLoader</a></li>
</ul>
</li>
<li><a href="#pipeline">pipeline</a><ul>
<li><a href="#1-filespipeline">1. FilesPipeline</a></li>
<li><a href="#2-imagespipeline">2. ImagesPipeline</a></li>
</ul>
</li>
<li><a href="#extension">extension</a><ul>
<li><a href="#1-exporter">1. Exporter</a></li>
</ul>
</li>
<li><a href="#%E6%A8%A1%E6%8B%9F%E7%99%BB%E9%99%86">&#x6A21;&#x62DF;&#x767B;&#x9646;</a><ul>
<li><a href="#1-%E6%9E%84%E9%80%A0%E8%A1%A8%E5%8D%95">1. &#x6784;&#x9020;&#x8868;&#x5355;</a></li>
<li><a href="#2-%E4%BD%BF%E7%94%A8cookie">2. &#x4F7F;&#x7528;Cookie</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8">&#x6570;&#x636E;&#x5B58;&#x50A8;</a><ul>
<li><a href="#1-sqlite">1. SQLite</a></li>
<li><a href="#2-mysql">2. mysql</a></li>
<li><a href="#3-mongodb">3. mongodb</a></li>
<li><a href="#4-redis">4. Redis</a></li>
<li><a href="#5-%E5%BC%82%E6%AD%A5%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93">5. &#x5F02;&#x6B65;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;</a></li>
</ul>
</li>
<li><a href="#%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86">&#x7F51;&#x7EDC;&#x4EE3;&#x7406;</a></li>
<li><a href="#%E4%B8%AD%E9%97%B4%E4%BB%B6">&#x4E2D;&#x95F4;&#x4EF6;</a><ul>
<li><a href="#1-%E4%B8%8B%E8%BD%BD%E4%B8%AD%E9%97%B4%E4%BB%B6">1. &#x4E0B;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;</a></li>
<li><a href="#2-%E7%88%AC%E8%99%AB%E4%B8%AD%E9%97%B4%E4%BB%B6">2. &#x722C;&#x866B;&#x4E2D;&#x95F4;&#x4EF6;</a></li>
</ul>
</li>
<li><a href="#settings">settings</a><ul>
<li><a href="#custom_settings">custom_settings</a></li>
<li><a href="#settings%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7">settings&#x7684;&#x4F7F;&#x7528;&#x6280;&#x5DE7;</a></li>
</ul>
</li>
<li><a href="#%E5%88%86%E5%B8%83%E5%BC%8F%E7%88%AC%E5%8F%96">&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;</a></li>
<li><a href="#scrapy%E4%BD%BF%E7%94%A8%E6%B3%A8%E9%87%8A%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95">scrapy&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;</a></li>
<li><a href="#%E7%88%AC%E8%99%AB%E9%83%A8%E7%BD%B2">&#x722C;&#x866B;&#x90E8;&#x7F72;</a></li>
<li><a href="#telnet">telnet</a></li>
</ul>
<!-- tocstop -->
<hr>
<h2 id="&#x4E00;&#x4E9B;&#x5C0F;&#x77E5;&#x8BC6;&#x70B9;"><a name="&#x4E00;&#x4E9B;&#x5C0F;&#x77E5;&#x8BC6;&#x70B9;" class="anchor-navigation-ex-anchor" href="#&#x4E00;&#x4E9B;&#x5C0F;&#x77E5;&#x8BC6;&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x4E00;&#x4E9B;&#x5C0F;&#x77E5;&#x8BC6;&#x70B9;</h2>
<p>Scrapy&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x529F;&#x80FD;&#x5E93;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x4E2A;&#x722C;&#x866B;&#x6846;&#x67B6;&#x3002;&#x722C;&#x866B;&#x6846;&#x67B6;&#x662F;&#x5B9E;&#x73B0;&#x722C;&#x866B;&#x529F;&#x80FD;&#x7684;&#x4E00;&#x4E2A;&#x8F6F;&#x4EF6;&#x7ED3;&#x6784;&#x548C;&#x529F;&#x80FD;&#x7EC4;&#x4EF6;&#x96C6;&#x5408;&#x3002; &#x722C;&#x866B;&#x6846;&#x67B6;&#x662F;&#x4E00;&#x4E2A;&#x534A;&#x6210;&#x54C1;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x6237;&#x5B9E;&#x73B0;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#x3002;</p>
<p>scrapy&#x662F;&#x57FA;&#x4E8E;&#x4E8B;&#x4EF6;&#x7684;&#xFF0C;&#x80FD;&#x5728;&#x6253;&#x5F00;&#x4E0A;&#x5343;&#x4E2A;&#x94FE;&#x63A5;&#x7684;&#x540C;&#x65F6;&#xFF08;&#x5E76;&#x884C;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x8BF7;&#x6C42;&#xFF09;&#xFF0C;&#x901A;&#x8FC7;&#x5E73;&#x7A33;&#x7684;&#x64CD;&#x4F5C;&#x62C6;&#x5206;&#x541E;&#x5410;&#x91CF;&#x7684;&#x5EF6;&#x8FDF;&#x3002;</p>
<p>&#x4ECE;&#x8F93;&#x51FA;&#x65E5;&#x5FD7;&#x51FA;&#x67E5;&#x770B;&#x722C;&#x866B;&#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<p>&#x51C6;&#x5907;&#x542F;&#x52A8;&#x722C;&#x866B; -&gt; &#x52A0;&#x8F7D;setting -&gt; &#x542F;&#x52A8;extension -&gt; &#x542F;&#x52A8;&#x4E0B;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6; -&gt; &#x542F;&#x52A8;&#x722C;&#x866B;&#x4E2D;&#x95F4;&#x4EF6; -&gt; &#x542F;&#x52A8;pipeline -&gt; &#x722C;&#x866B;&#x5DF2;&#x7ECF;&#x542F;&#x52A8;&#xFF08;spider_opened&#x4FE1;&#x53F7;&#xFF09; -&gt; &#x722C;&#x53D6;&#x4FE1;&#x606F; -&gt; &#x722C;&#x53D6;&#x5B8C;&#x6210;&#xFF0C;&#x5F00;&#x59CB;&#x5173;&#x95ED;&#x722C;&#x866B; -&gt; &#x663E;&#x793A;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F; -&gt; &#x722C;&#x866B;&#x5173;&#x95ED;</p>
<p>&#x65E5;&#x5FD7;&#x7B49;&#x7EA7;&#xFF1A;DEBUG&#x3001;INFO&#x3001;WARNING&#x3001;ERROR&#x3001;CRITICAL&#x3001;SILENT&#xFF08;&#x4E0D;&#x8BB0;&#x5F55;&#x4EFB;&#x4F55;&#x65E5;&#x5FD7;&#xFF09;</p>
<p>scrapy&#x6846;&#x67B6;&#x7ED3;&#x6784;&#xFF1A;</p>
<hr>
<p><img src="images/scrapy/scrapy.png" alt="scrapy&#x6846;&#x67B6;"></p>
<hr>
<p>item pipeline&#x540E;&#x9762;&#x53EF;&#x4EE5;&#x63A5;exporter&#xFF08;&#x4E00;&#x79CD;extension&#xFF09;&#xFF0C;&#x5C06;item&#x4EE5;&#x67D0;&#x79CD;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x5199;&#x5165;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;&#xFF1A;spider&#x3001;pipeline&#x3001;settings&#x3001;middleware&#xFF08;&#x6839;&#x636E;&#x9700;&#x8981;&#xFF09;&#x3002;</p>
<h2 id="scrapy&#x547D;&#x4EE4;"><a name="scrapy&#x547D;&#x4EE4;" class="anchor-navigation-ex-anchor" href="#scrapy&#x547D;&#x4EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. scrapy&#x547D;&#x4EE4;</h2>
<h3 id="&#x67E5;&#x770B;scrapy&#x76F8;&#x5173;&#x4FE1;&#x606F;"><a name="&#x67E5;&#x770B;scrapy&#x76F8;&#x5173;&#x4FE1;&#x606F;" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x770B;scrapy&#x76F8;&#x5173;&#x4FE1;&#x606F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. &#x67E5;&#x770B;scrapy&#x76F8;&#x5173;&#x4FE1;&#x606F;</h3>
<p>&#x5B89;&#x88C5;scrapy&#x540E;&#xFF0C;&#x67E5;&#x770B;&#x7248;&#x672C;&#x53F7;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token comment">#!/bin/python3</span>
<span class="token keyword">import</span> scrapy
scrapy<span class="token punctuation">.</span>version_info
</code></pre>
<hr>
<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">scrapy -h
scrapy <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> -h
scrapy <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">]</span>
</code></pre>
<hr>
<h3 id="&#x521B;&#x5EFA;&#x722C;&#x866B;"><a name="&#x521B;&#x5EFA;&#x722C;&#x866B;" class="anchor-navigation-ex-anchor" href="#&#x521B;&#x5EFA;&#x722C;&#x866B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. &#x521B;&#x5EFA;&#x722C;&#x866B;</h3>
<pre class="language-"><code class="lang-bash">scrapy genspider <span class="token punctuation">[</span>mySpider<span class="token punctuation">]</span> <span class="token punctuation">[</span>domain<span class="token punctuation">]</span>
</code></pre>
<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x53C2;&#x6570; --template=TEMPLATE, -t TEMPLATE &#x6307;&#x5B9A;&#x521B;&#x5EFA;&#x722C;&#x866B;&#x4F7F;&#x7528;&#x7684;&#x6A21;&#x677F;&#x6587;&#x4EF6;&#x3002;</p>
<hr>
<h3 id="&#x542F;&#x52A8;&#x722C;&#x866B;"><a name="&#x542F;&#x52A8;&#x722C;&#x866B;" class="anchor-navigation-ex-anchor" href="#&#x542F;&#x52A8;&#x722C;&#x866B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. &#x542F;&#x52A8;&#x722C;&#x866B;</h3>
<pre class="language-"><code class="lang-bash">scrapy crawl <span class="token punctuation">[</span>spider_name<span class="token punctuation">]</span>    <span class="token comment"># spider_name&#x662F;&#x67D0;&#x4E2A;py&#x6587;&#x4EF6;&#x7684;&#x540D;&#x5B57;</span>
</code></pre>
<hr>
<h3 id="&#x4E3A;&#x722C;&#x866B;&#x6DFB;&#x52A0;&#x53C2;&#x6570;"><a name="&#x4E3A;&#x722C;&#x866B;&#x6DFB;&#x52A0;&#x53C2;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x4E3A;&#x722C;&#x866B;&#x6DFB;&#x52A0;&#x53C2;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.4. &#x4E3A;&#x722C;&#x866B;&#x6DFB;&#x52A0;&#x53C2;&#x6570;</h3>
<p>&#x8FD0;&#x884C;&#x722C;&#x866B;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;-a&#x6DFB;&#x52A0;&#x53C2;&#x6570;&#x3002;&#x4F20;&#x8FDB;&#x53BB;&#x7684;&#x90FD;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<pre class="language-"><code>scrapy crawl [mySpider] -a x=123 -a y=hg
</code></pre><p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token comment"># &#x5728;mySpider&#x7C7B;&#x4E2D;</span>
x <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">&apos;x&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;default&apos;</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> self<span class="token punctuation">.</span>x <span class="token comment"># &#x5982;&#x679C;&#x6CA1;&#x6709;&#x4F20;x&#x53C2;&#x6570;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x6216;&#x51FA;&#x9519;</span>
</code></pre>
<hr>
<h3 id="&#x4E3A;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x53C2;&#x6570;"><a name="&#x4E3A;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x53C2;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x4E3A;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x53C2;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.5. &#x4E3A;&#x9879;&#x76EE;&#x6DFB;&#x52A0;&#x53C2;&#x6570;</h3>
<pre class="language-"><code class="lang-bash">scrapy crawl <span class="token punctuation">[</span>mySpider<span class="token punctuation">]</span> -s <span class="token assign-left variable">SOME_ARG</span><span class="token operator">=</span>xxx
</code></pre>
<hr>
<h3 id="&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;"><a name="&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.6. &#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;</h3>
<pre class="language-"><code class="lang-bash">scrapy shell <span class="token punctuation">[</span>url<span class="token punctuation">]</span> --nolog   <span class="token comment"># &#x4E0D;&#x8981;log&#x662F;&#x4E3A;&#x4E86;&#x597D;&#x770B;</span>
</code></pre>
<p>&#x4F7F;&#x7528;view(response)&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x663E;&#x793A;response&#x4E2D;&#x7684;&#x9875;&#x9762;&#xFF08;&#x53EF;&#x80FD;&#x548C;&#x5728;&#x7F51;&#x4E0A;&#x770B;&#x5230;&#x7684;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;scrapy&#x722C;&#x866B;&#x4E0B;&#x8F7D;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x6D4F;&#x89C8;&#x5668;&#x4E0B;&#x8F7D;&#x7684;&#x9875;&#x9762;&#xFF09;&#x3002;</p>
<hr>
<h3 id="&#x66FF;&#x6362;starturls"><a name="&#x66FF;&#x6362;starturls" class="anchor-navigation-ex-anchor" href="#&#x66FF;&#x6362;starturls"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.7. &#x66FF;&#x6362;start_urls</h3>
<p>&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x722C;&#x866B;&#xFF0C;&#x722C;&#x53D6;&#x7ED9;&#x5B9A;url&#x7684;&#x4FE1;&#x606F;&#xFF08;&#x4F1A;&#x66FF;&#x6362;&#x6389;&#x722C;&#x866B;&#x4E2D;&#x7684; start_urls&#xFF09;&#xFF1A;</p>
<pre class="language-"><code>scrapy parse --spider=<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xxx</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5F53;&#x65B9;&#x4FBF;&#x7684;&#x8C03;&#x8BD5;&#x547D;&#x4EE4;&#x3002;</p>
<hr>
<h3 id="&#x542F;&#x52A8;&#x722C;&#x866B;&#xFF0C;&#x4F46;&#x53EA;&#x722C;&#x53D6;&#x90E8;&#x5206;&#x6570;&#x636E;"><a name="&#x542F;&#x52A8;&#x722C;&#x866B;&#xFF0C;&#x4F46;&#x53EA;&#x722C;&#x53D6;&#x90E8;&#x5206;&#x6570;&#x636E;" class="anchor-navigation-ex-anchor" href="#&#x542F;&#x52A8;&#x722C;&#x866B;&#xFF0C;&#x4F46;&#x53EA;&#x722C;&#x53D6;&#x90E8;&#x5206;&#x6570;&#x636E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.8. &#x542F;&#x52A8;&#x722C;&#x866B;&#xFF0C;&#x4F46;&#x53EA;&#x722C;&#x53D6;&#x90E8;&#x5206;&#x6570;&#x636E;</h3>
<p>&#x82E5;&#x662F;&#x8981;&#x6D4B;&#x8BD5;&#x722C;&#x866B;&#xFF0C;&#x800C;&#x722C;&#x866B;&#x4F1A;&#x722C;&#x53D6;&#x4E0A;&#x4E07;&#x4E2A;&#x9875;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x53C2;&#x6570;&#x9650;&#x5B9A;Item&#x6216;page&#x6570;&#x91CF;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">scrapy crawl <span class="token operator">&lt;</span>spider_name<span class="token operator">&gt;</span> -s <span class="token assign-left variable">CLOSESPIDER_ITEMCOUNT</span><span class="token operator">=</span><span class="token number">90</span>
scrapy crawl <span class="token operator">&lt;</span>spider_name<span class="token operator">&gt;</span> -s <span class="token assign-left variable">CLOSESPIDER_PAGECOUNT</span><span class="token operator">=</span><span class="token number">9</span>
</code></pre>
<hr>
<h3 id="&#x6682;&#x505C;scrapy&#x722C;&#x866B;&#x6267;&#x884C;"><a name="&#x6682;&#x505C;scrapy&#x722C;&#x866B;&#x6267;&#x884C;" class="anchor-navigation-ex-anchor" href="#&#x6682;&#x505C;scrapy&#x722C;&#x866B;&#x6267;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.9. &#x6682;&#x505C;scrapy&#x722C;&#x866B;&#x6267;&#x884C;</h3>
<p>&#x901A;&#x8FC7;&#x589E;&#x52A0;&#x53C2;&#x6570;JOBDIR&#x6765;&#x8FDB;&#x884C;&#xFF1A;</p>
<ol>
<li><p>&#x5728;&#x542F;&#x7528;&#x722C;&#x866B;&#x65F6;&#xFF0C;&#x5373;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x52A0;&#x5165;&#x53C2;&#x6570;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">scrapy crawl <span class="token punctuation">[</span>mySpider<span class="token punctuation">]</span> -s <span class="token assign-left variable">JOBDIR</span><span class="token operator">=</span>xxx/001
</code></pre>
</li>
<li><p>&#x5728;&#x8BBE;&#x7F6E;&#x6587;&#x4EF6;settings.py&#x6DFB;&#x52A0;&#x53C2;&#x6570;</p>
<pre class="language-"><code class="lang-python"><span class="token comment"># settings.py</span>
JOBDIR<span class="token operator">=</span><span class="token string">&apos;xxx/001&apos;</span>
</code></pre>
</li>
</ol>
<p>&#x5728;&#x6DFB;&#x52A0;&#x5B8C;&#x53C2;&#x6570;&#x540E;&#xFF0C;&#x8FD0;&#x884C;&#x722C;&#x866B;&#x3002;&#x5728;&#x722C;&#x866B;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x6309;<strong>ctrl+c&#xFF08;&#x53EA;&#x6309;&#x4E00;&#x6B21;&#xFF09;</strong>&#x505C;&#x6B62;&#x722C;&#x866B;&#xFF0C;&#x505C;&#x6B62;&#x540E;&#x5C31;&#x4F1A;&#x5728;&#x76EE;&#x5F55;xxx/001&#x4E0B;&#x751F;&#x6210;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x91CC;&#x53EA;&#x80FD;&#x6309;&#x4E00;&#x6B21;ctrl+c&#xFF0C;&#x5982;&#x679C;&#x6309;&#x4E86;&#x4E24;&#x6B21;&#x5C31;&#x8868;&#x793A;&#x5F3A;&#x5236;&#x9000;&#x51FA;&#x4E86;&#x3002;</p>
<p>&#x751F;&#x6210;&#x7684;xxx/001&#x76EE;&#x5F55;&#x5728;&#x9879;&#x76EE;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#xFF08;&#x5373;&#x4E0E;scrapy.cfg&#x6587;&#x4EF6;&#x5728;&#x540C;&#x4E00;&#x76EE;&#x5F55;&#xFF09;&#x3002;</p>
<p>&#x4E0B;&#x6B21;&#x6211;&#x4EEC;&#x60F3;&#x63A5;&#x7740;&#x4E0A;&#x6B21;&#x722C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x540C;&#x6837;&#x7684;&#x547D;&#x4EE4;&#x542F;&#x52A8;&#x722C;&#x866B;&#xFF0C;&#x4EE3;&#x8868;&#x6211;&#x4EEC;&#x4F7F;&#x7528;xxx/001&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x7684;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x3002;</p>
<hr>
<h3 id="&#x4F7F;&#x7528;&#x811A;&#x672C;&#x542F;&#x52A8;scrapy&#x722C;&#x866B;"><a name="&#x4F7F;&#x7528;&#x811A;&#x672C;&#x542F;&#x52A8;scrapy&#x722C;&#x866B;" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x811A;&#x672C;&#x542F;&#x52A8;scrapy&#x722C;&#x866B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.10. &#x4F7F;&#x7528;&#x811A;&#x672C;&#x542F;&#x52A8;scrapy&#x722C;&#x866B;</h3>
<pre class="language-"><code class="lang-python"><span class="token comment">#!/bin/python3</span>
<span class="token keyword">from</span> scrapy <span class="token keyword">import</span> cmdline
cmdline<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&apos;scrapy crawl [spider_name]&apos;</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<hr>
<h3 id="&#x5BFC;&#x51FA;&#x6570;&#x636E;"><a name="&#x5BFC;&#x51FA;&#x6570;&#x636E;" class="anchor-navigation-ex-anchor" href="#&#x5BFC;&#x51FA;&#x6570;&#x636E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.11. &#x5BFC;&#x51FA;&#x6570;&#x636E;</h3>
<p>-o&#xFF1A;&#x6307;&#x5B9A;&#x5BFC;&#x51FA;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x540E;&#x7F00;&#x540D;&#x6765;&#x6307;&#x5B9A;&#x5BFC;&#x51FA;&#x683C;&#x5F0F;&#x3002;</p>
<p>-t&#xFF1A;&#x6307;&#x5B9A;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x3002;</p>
<pre class="language-"><code class="lang-bash">scrapy crawl <span class="token punctuation">[</span>mySpider<span class="token punctuation">]</span> -t csv -o <span class="token string">&apos;export_data/%(name)s_%(time)s.csv&apos;</span>
</code></pre>
<p>%(name)s&#xFF1A;Spider&#x7684;&#x540D;&#x5B57;&#x3002;</p>
<p>%(time)s&#xFF1A;&#x6587;&#x4EF6;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&#x3002;</p>
<hr>
<h3 id="&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x722C;&#x866B;"><a name="&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x722C;&#x866B;" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x722C;&#x866B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.12. &#x4F7F;&#x7528;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x722C;&#x866B;</h3>
<p>&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x6A21;&#x677F;&#x521B;&#x5EFA;&#x722C;&#x866B;&#xFF08;&#x9ED8;&#x8BA4;&#x662F;basic&#xFF09;</p>
<pre class="language-"><code>scrapy genspider -t basic|crawl|csvfeed|xmlfeed [spider_name] [domain]
</code></pre><h2 id="&#x76F8;&#x5173;&#x7C7B;&#x8BF4;&#x660E;"><a name="&#x76F8;&#x5173;&#x7C7B;&#x8BF4;&#x660E;" class="anchor-navigation-ex-anchor" href="#&#x76F8;&#x5173;&#x7C7B;&#x8BF4;&#x660E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. &#x76F8;&#x5173;&#x7C7B;&#x8BF4;&#x660E;</h2>
<h3 id="1-request&#xFF08;scrapyhttprequestrequest&#xFF09;"><a name="1-request&#xFF08;scrapyhttprequestrequest&#xFF09;" class="anchor-navigation-ex-anchor" href="#1-request&#xFF08;scrapyhttprequestrequest&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. 1. Request&#xFF08;scrapy.http.request.Request&#xFF09;</h3>
<pre class="language-"><code class="lang-python">Request<span class="token punctuation">(</span>url<span class="token punctuation">,</span> callback<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">&apos;GET&apos;</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> body<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
        cookies<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> meta<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">&apos;utf-8&apos;</span><span class="token punctuation">,</span> priority<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
        dont_filter<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> errback<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre>
<p>&#x53C2;&#x6570;&#x89E3;&#x91CA;&#xFF1A;</p>
<ul>
<li>callback&#xFF1A;Callable&#x7C7B;&#x578B;&#xFF0C;Request&#x5BF9;&#x8C61;&#x8BF7;&#x6C42;&#x7684;&#x9875;&#x9762;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x7531;&#x8BE5;&#x53C2;&#x6570;<strong>&#x6307;&#x5B9A;&#x7684;&#x51FD;&#x6570;</strong>&#x89E3;&#x6790;&#x9875;&#x9762;&#x5185;&#x5BB9;&#x3002;</li>
<li>meta&#xFF1A;&#x5143;&#x6570;&#x636E;&#x5B57;&#x5178;&#xFF0C;dict&#x7C7B;&#x578B;&#xFF0C;&#x7528;&#x4E8E;&#x5728;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x4F20;&#x9012;&#x6570;&#x636E;&#x3002;</li>
<li>dont_filter&#xFF1A;&#x5982;&#x679C;&#x5BF9;&#x540C;&#x4E00;url&#x8FDB;&#x884C;&#x591A;&#x6B21;&#x8BF7;&#x6C42;&#xFF0C;&#x4E0D;&#x5BF9;&#x91CD;&#x590D;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x8FC7;&#x6EE4;&#x3002;&#x5982;&#x679C;&#x722C;&#x53D6;&#x7684;&#x9875;&#x9762;&#x5185;&#x5BB9;&#x4F1A;&#x968F;&#x7740;&#x65F6;&#x95F4;&#x53D8;&#x5316;&#xFF0C;&#x5E94;&#x8BE5;&#x5C06;&#x5176;&#x7F6E;&#x4E3A;True&#x3002;</li>
<li>errback&#xFF1A;Callable&#x7C7B;&#x578B;&#xFF0C;&#x8BF7;&#x6C42;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x6216;&#x8005;http&#x9519;&#x8BEF;&#x65F6;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p>request&#x5E38;&#x7528;&#x5C5E;&#x6027;&#xFF1A;</p>
<ul>
<li><p>url&#x3001;method&#x3001;headers&#x3001;body&#xFF08;bytes&#x6216;string&#x7C7B;&#x578B;&#xFF09;&#x3001;meta&#xFF08;&#x5B57;&#x5178;&#xFF09;</p>
<h3 id="2-response&#xFF08;scrapyhttpresponseresponse&#xFF09;"><a name="2-response&#xFF08;scrapyhttpresponseresponse&#xFF09;" class="anchor-navigation-ex-anchor" href="#2-response&#xFF08;scrapyhttpresponseresponse&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. 2. Response&#xFF08;scrapy.http.response.Response&#xFF09;</h3>
</li>
</ul>
<pre class="language-"><code class="lang-python">Response<span class="token punctuation">(</span>url<span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> body<span class="token operator">=</span><span class="token string">b&apos;&apos;</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> request<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre>
<p>Response&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x7C7B;&#xFF0C;&#x6709;&#x5982;&#x4E0B;&#x5B50;&#x7C7B;&#xFF1A;TextResponse&#x3001;HtmlResponse&#x3001;XmlResponse&#x3002;&#x4E0B;&#x8F7D;&#x5668;&#x4F1A;&#x6839;&#x636E;HTTP&#x54CD;&#x5E94;&#x5934;&#x7684;Conten-Type&#x521B;&#x5EFA;&#x67D0;&#x4E2A;&#x5177;&#x4F53;&#x7684;Response&#x5BF9;&#x8C61;&#x3002;</p>
<p>response&#x5E38;&#x7528;&#x5C5E;&#x6027;&#xFF1A;</p>
<ul>
<li>url&#x3001;status&#x3001;headers&#xFF08;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;dict&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x6709;<u>get</u>&#x548C;<u>getlist</u>&#x65B9;&#x6CD5;&#xFF09;</li>
<li>encoding&#xFF1A;http&#x54CD;&#x5E94;&#x6B63;&#x6587;&#x7684;&#x7F16;&#x7801;&#x3002;</li>
<li>body&#xFF1A;http&#x54CD;&#x5E94;&#x6B63;&#x6587;&#xFF0C;bytes&#x7C7B;&#x578B;&#x3002;</li>
<li>text&#xFF1A;http&#x54CD;&#x5E94;&#x6B63;&#x6587;&#xFF0C;string&#x7C7B;&#x578B;&#x3002;&#x7531;body&#x5C5E;&#x6027;&#x901A;&#x8FC7;encoding&#x5C5E;&#x6027;&#x89E3;&#x7801;&#x5F97;&#x5230;&#x3002;</li>
<li>request&#xFF1A;&#x4EA7;&#x751F;&#x8BE5;http&#x54CD;&#x5E94;&#x7684;request&#x5BF9;&#x8C61;&#x3002;</li>
<li>meta&#xFF1A;&#x5373;response.request.meta&#x3002;</li>
<li>selector&#xFF1A;&#x7528;&#x4E8E;&#x4ECE;Response&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x3002;</li>
</ul>
<p>response&#x5E38;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>urljoin(relative_url)&#xFF1A;&#x5C06;&#x76F8;&#x5BF9;&#x94FE;&#x63A5;url&#x6784;&#x9020;&#x6210;&#x7EDD;&#x5BF9;&#x94FE;&#x63A5;&#x3002;</li>
<li><p>xpath&#xFF08;query&#xFF09;&#x6216;css&#xFF08;query&#xFF09;&#xFF1A;&#x5B9E;&#x9645;&#x662F;response.selector.xxx(query)&#xFF0C;&#x7528;&#x4E8E;&#x5728;Response&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x3002;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#x7684;&#x662F;Selector&#x3002;</p>
</li>
<li><p>re&#xFF08;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF09;&#xFF1A;&#x7528;&#x4E8E;&#x5728;Response&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x3002;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#x7684;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
</li>
</ul>
<h3 id="3-&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;spider&#xFF08;&#x7EE7;&#x627F;scrapyspider&#xFF09;"><a name="3-&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;spider&#xFF08;&#x7EE7;&#x627F;scrapyspider&#xFF09;" class="anchor-navigation-ex-anchor" href="#3-&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;spider&#xFF08;&#x7EE7;&#x627F;scrapyspider&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.3. 3. &#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;Spider&#xFF08;&#x7EE7;&#x627F;scrapy.Spider&#xFF09;</h3>
<p>&#x5E38;&#x7528;&#x5C5E;&#x6027;&#xFF1A;</p>
<ul>
<li>name&#xFF1A;spider&#x7684;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#xFF0C;&#x5404;&#x4E2A;spider&#x4E4B;&#x95F4;&#x7684;name&#x4E0D;&#x4E00;&#x6837;&#x3002;</li>
<li>start_urls&#xFF1A;list&#xFF0C;&#x8D77;&#x59CB;&#x722C;&#x53D6;&#x9875;&#x9762;&#x3002;&#x8C03;&#x7528;parse()&#x89E3;&#x6790;&#x51FD;&#x6570;&#x3002;</li>
<li>logger&#xFF1A;&#x81EA;&#x5E26;&#x7684;&#x65E5;&#x5FD7;&#x3002;</li>
<li>settings&#xFF1A;&#x8BBF;&#x95EE;settings&#x3002;</li>
</ul>
<p>&#x5E38;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>parse&#xFF1A;&#x9875;&#x9762;&#x89E3;&#x6790;&#x51FD;&#x6570;&#xFF0C;&#x5728;Request&#x4E0D;&#x6307;&#x5B9A;callback&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;</li>
<li>start_requests&#xFF1A;&#x5728;&#x6CA1;&#x8BBE;&#x7F6E;start_urls&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x81EA;&#x5DF1;&#x722C;&#x53D6;&#x8D77;&#x59CB;&#x9875;&#xFF08;&#x81EA;&#x5DF1;&#x6784;&#x9020;Request&#x5BF9;&#x8C61;&#xFF09;&#x3002;</li>
</ul>
<h3 id="4-&#x5176;&#x4ED6;"><a name="4-&#x5176;&#x4ED6;" class="anchor-navigation-ex-anchor" href="#4-&#x5176;&#x4ED6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.4. 4. &#x5176;&#x4ED6;</h3>
<p>&#x5728;CrawlSpider&#xFF08;&#x4F7F;&#x7528; -t crawl &#x751F;&#x6210;&#xFF09;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;Rule&#x6765;&#x8DDF;&#x8E2A;&#x94FE;&#x63A5;&#xFF0C;&#x4EE5;&#x5B9E;&#x73B0;&#x722C;&#x866B;&#x7684;&#x53CC;&#x5411;&#x722C;&#x53D6;&#xFF08;&#x5BF9;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x8FDB;&#x884C;&#x6A2A;&#x5411;&#x548C;&#x7EB5;&#x5411;&#x722C;&#x53D6;&#xFF09;&#x3002;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> Rule

rule <span class="token operator">=</span> Rule<span class="token punctuation">(</span>link_extractor<span class="token punctuation">,</span> callback <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span> cb_kwargs <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span> follow <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
            process_links <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span> process_request <span class="token operator">=</span> <span class="token boolean">None</span> <span class="token punctuation">)</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
link_extractor&#xFF1A;&#x7528;&#x4E8E;&#x62BD;&#x53D6;&#x94FE;&#x63A5;
callback&#xFF1A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF08;&#x5373;&#x5904;&#x7406;response&#x7684;&#x51FD;&#x6570;&#xFF09;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x3002;
cb_kwargs&#xFF1A;&#x662F;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x8981;&#x4F20;&#x9012;&#x7ED9;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x5173;&#x952E;&#x5B57;&#x53C2;&#x6570;&#x7684;dict&#x3002;
follow&#xFF1A;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;callback&#xFF0C;rule&#x4F1A;&#x7EE7;&#x7EED;&#x8DDF;&#x8E2A;&#x62BD;&#x53D6;&#x5230;&#x7684;url&#xFF0C;&#x5E76;&#x5BF9;&#x5176;&#x62BD;&#x53D6;&#x94FE;&#x63A5;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;callback&#x540E;&#xFF0C;&#x4ECD;&#x60F3;&#x8DDF;&#x8E2A;&#x94FE;&#x63A5;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;follow&#x8BBE;&#x4E3A;True&#xFF0C;&#x6216;&#x8005;&#x5728;callback&#x4E2D;&#x4F7F;&#x7528;yield&#x6216;return&#x8FD4;&#x56DE;&#x5B83;&#x4EEC;&#x3002;
&quot;&quot;&quot;</span>
</code></pre>
<h2 id="&#x6570;&#x636E;&#x63D0;&#x53D6;"><a name="&#x6570;&#x636E;&#x63D0;&#x53D6;" class="anchor-navigation-ex-anchor" href="#&#x6570;&#x636E;&#x63D0;&#x53D6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. &#x6570;&#x636E;&#x63D0;&#x53D6;</h2>
<p>HTTP&#x5E38;&#x7528;&#x7684;&#x6587;&#x672C;&#x89E3;&#x6790;&#x6A21;&#x5757;&#xFF1A;</p>
<ul>
<li>BeautifulSoup&#xFF1A;API&#x7B80;&#x5355;&#x6613;&#x7528;&#xFF0C;&#x4F46;&#x89E3;&#x6790;&#x901F;&#x5EA6;&#x8F83;&#x6162;&#x3002;</li>
<li>lxml&#xFF1A;&#x7531;C&#x8BED;&#x8A00;&#x7F16;&#x5199;&#x7684;xml&#x89E3;&#x6790;&#x5E93;&#xFF0C;&#x901F;&#x5EA6;&#x5FEB;&#xFF0C;&#x4F46;API&#x590D;&#x6742;&#x3002;</li>
</ul>
<p>scrapy&#x7684;Selector&#x7C7B;&#xFF0C;&#x662F;&#x57FA;&#x4E8E;lxml&#x5E93;&#x6784;&#x5EFA;&#x7684;&#xFF0C;&#x5E76;&#x7B80;&#x5316;&#x4E86;API&#x63A5;&#x53E3;&#x3002;</p>
<p>Selector&#x5185;&#x5BB9;&#x63D0;&#x53D6;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>extract()</li>
<li>re()</li>
<li>extract_first()&#xFF1A;SelectorList&#x4E13;&#x6709;&#x3002;</li>
<li>re_first()&#xFF1A;SelectorList&#x4E13;&#x6709;&#x3002;</li>
<li></li>
</ul>
<p>&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x8C37;&#x6B4C;&#x6D4F;&#x89C8;&#x5668;&#x5FEB;&#x901F;&#x83B7;&#x5F97;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x7684;xpath&#x6216;css&#x8DEF;&#x5F84;&#xFF1A;</p>
<p>F12 -&gt; &#x70B9;&#x51FB;&#x67D0;&#x4E2A;&#x8282;&#x70B9; -&gt; &#x5355;&#x51FB;&#x53F3;&#x952E; -&gt; Copy -&gt; Copyselector&#xFF08;css&#xFF09;&#x6216;&#x8005; Copy xpath&#x3002; </p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5728;console&#x4E2D;&#x4F7F;&#x7528;&#x8868;&#x8FBE;&#x5F0F; $x(&apos;xpath&#x8868;&#x8FBE;&#x5F0F;&apos;) &#x6765;&#x83B7;&#x53D6;&#x76F8;&#x5E94;&#x8282;&#x70B9;&#xFF1A;</p>
<pre class="language-"><code class="lang-javascript"><span class="token function">$x</span><span class="token punctuation">(</span><span class="token string">&apos;//*[@id=&quot;content_views&quot;]/pre[15]&apos;</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="1-xpath&#x9009;&#x62E9;&#x5668;"><a name="1-xpath&#x9009;&#x62E9;&#x5668;" class="anchor-navigation-ex-anchor" href="#1-xpath&#x9009;&#x62E9;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. 1. xpath&#x9009;&#x62E9;&#x5668;</h3>
<p>XPath&#xFF1A;XML&#x8DEF;&#x5F84;&#x8BED;&#x8A00;&#xFF08;XML Path Language&#xFF09;&#x3002;</p>
<p>xpath&#x57FA;&#x7840;&#x8BED;&#x6CD5;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x8868;&#x8FBE;&#x5F0F;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">/</td>
<td>&#x7528;&#x5728;xpath&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6700;&#x524D;&#x9762;&#xFF0C;&#x8868;&#x793A;&#x6587;&#x6863;&#x7684;&#x6839;&#xFF08;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF09;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">//xx</td>
<td>&#x7528;&#x5728;xpath&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6700;&#x524D;&#x9762;&#xFF0C;&#x8868;&#x793A;&#x6587;&#x6863;&#x4E2D;&#x6240;&#x6709;&#x7684;xx&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td>&#x7528;&#x5728;xpath&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6700;&#x524D;&#x9762;&#xFF0C;&#x8868;&#x793A;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x7684;&#x6240;&#x6709;&#x5B50;&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">yy//xx</td>
<td>yy&#x8282;&#x70B9;&#x7684;&#x5B50;&#x5B59;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x7684;xx&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">.</td>
<td>&#x5F53;&#x524D;&#x8282;&#x70B9;&#xFF0C;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">..</td>
<td>&#x7236;&#x8282;&#x70B9;&#xFF0C;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx/*</td>
<td>xx&#x8282;&#x70B9;&#x7684;&#x6240;&#x6709;&#x5B50;&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">xx/*/yy</td>
<td>&#x9009;&#x4E2D;xx&#x7684;&#x5B59;&#x5B50;&#x8282;&#x70B9;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x7684;yy&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">xx/@attr</td>
<td>&#x9009;&#x4E2D;xx&#x8282;&#x70B9;&#x7684;attr&#x5C5E;&#x6027;&#x3002;&quot;a/@href&quot;&#xFF1A;&#x9009;&#x4E2D;a&#x6807;&#x7B7E;&#x7684;href&#x5C5E;&#x6027;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx/@*</td>
<td>&#x9009;&#x4E2D;xx&#x8282;&#x70B9;&#x7684;&#x6240;&#x6709;&#x5C5E;&#x6027;</td>
</tr>
<tr>
<td style="text-align:center">xx/text()</td>
<td>&#x9009;&#x4E2D;xx&#x8282;&#x70B9;&#x4E2D;&#x7684;&#x6587;&#x672C;&#x4FE1;&#x606F;</td>
</tr>
<tr>
<td style="text-align:center">node[&#x8C13;&#x8BCD;]</td>
<td>&#x7528;&#x6765;&#x67E5;&#x627E;&#x6EE1;&#x8DB3;&#x8C13;&#x8BCD;&#x6761;&#x4EF6;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5982;div[@id=&quot;xx&quot;]&#xFF0C;&#x8868;&#x793A;id&#x4E3A;&quot;xx&quot;&#x7684;div&#x8282;&#x70B9;</td>
</tr>
</tbody>
</table>
<p>&#x5E38;&#x7528;&#x8C13;&#x8BED;&#x51FD;&#x6570;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x8C13;&#x8BED;</th>
<th>&#x542B;&#x4E49;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&#x6570;&#x5B57;&gt;0</td>
<td>&#x7528;&#x6765;&#x9009;&#x7B2C;&#x51E0;&#x4E2A;&#x8282;&#x70B9;&#x3002;&#x5982;xx[num]&#xFF0C;&#x8868;&#x793A;&#x9009;&#x4E2D;&#x7B2C;num&#x4E2A;&#x8282;&#x70B9;xx&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx[last()]</td>
<td>&#x9009;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;xx&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx[position()&lt;3]</td>
<td>&#x9009;&#x4E2D;&#x524D;2&#x4E2A;xx&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx[@attr]</td>
<td>&#x9009;&#x4E2D;&#x542B;&#x6709;attr&#x5C5E;&#x6027;&#x7684;xx&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx[@attr=&#x201D;hg&#x201C;]</td>
<td>&#x9009;&#x4E2D;&#x542B;&#x6709;attr&#x5C5E;&#x6027;&#x4E3A;&#x201D;hg&#x201C;&#x7684;xx&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx[contains(@href, &#x201D;hg&#x201C;)]</td>
<td>&#x9009;&#x4E2D;href&#x5C5E;&#x6027;&#x4E2D;&#x5305;&#x542B;&#x6709;&quot;hg&quot;&#x7684;xx&#x8282;&#x70B9;&#x3002;&#x5373;&#x201D;hg&#x201C;&#x662F;@attr&#x7684;&#x5B50;&#x4E32;&#x3002;<br>&apos;div[contains(text(), &#x201D;hg&#x201D;)]&apos;</td>
</tr>
<tr>
<td style="text-align:center">xx[starts-with(@id, &#x201D;hg&#x201C;)]</td>
<td>&#x9009;&#x4E2D;xx&#x8282;&#x70B9;&#xFF0C;&#x8BE5;&#x8282;&#x70B9;&#x7684;attr&#x5C5E;&#x6027;&#x4EE5;&#x201D;hg&#x201C;&#x5F00;&#x5934;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">and</td>
<td>&#x5982; &#x2018;div[contains(@id, &#x201D;hg&#x201D;) and contains(@href, &#x201D;www&#x201D;)]&#x2019;</td>
</tr>
<tr>
<td style="text-align:center">string(a/b/c)</td>
<td>&#x8FD4;&#x56DE;c&#x8282;&#x70B9;&#xFF08;&#x53EA;&#x627E;&#x7B2C;&#x4E00;&#x4E2A;c&#x8282;&#x70B9;&#xFF09;&#x4E0B;&#x6240;&#x6709;&#x5B50;&#x5B59;&#x8282;&#x70B9;&#x7684;&#x6587;&#x672C;&#x4FE1;&#x606F;&#x7684;&#x7EC4;&#x5408;<br>&#xFF08;&#x5373;&#x5C06;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x7EC4;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF09;</td>
</tr>
</tbody>
</table>
<p>string&#x8BE6;&#x89E3;&#xFF1A;</p>
<pre class="language-"><code class="lang-python">s <span class="token operator">=</span> Selector<span class="token punctuation">(</span><span class="token punctuation">)</span>

a <span class="token operator">=</span> s<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span> <span class="token string">&apos;string(/html/body/a)&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>

b <span class="token operator">=</span> s<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&apos;/html/body/a//text()&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
c <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>b<span class="token punctuation">)</span>

a<span class="token operator">==</span>c <span class="token comment"># True</span>
</code></pre>
<h3 id="2-css&#x9009;&#x62E9;&#x5668;"><a name="2-css&#x9009;&#x62E9;&#x5668;" class="anchor-navigation-ex-anchor" href="#2-css&#x9009;&#x62E9;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.2. 2. css&#x9009;&#x62E9;&#x5668;</h3>
<p>css&#x5373;&#x5C42;&#x53E0;&#x6837;&#x5F0F;&#x8868;&#x3002;</p>
<p>&#x5F53;&#x4F7F;&#x7528;Selector&#x5BF9;&#x8C61;&#x7684;css&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x5728;&#x5185;&#x90E8;&#x4F1A;&#x5C06;css&#x8868;&#x8FBE;&#x5F0F;&#x7FFB;&#x8BD1;&#x6210;xpath&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;xpath&#x65B9;&#x6CD5;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:center">&#x8868;&#x8FBE;&#x5F0F;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*</td>
<td>&#x9009;&#x4E2D;&#x6240;&#x6709;&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">xx,yy</td>
<td>&#x9009;&#x4E2D;&#x6240;&#x6709;&#x7684;xx&#x8282;&#x70B9;&#x548C;yy&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx yy</td>
<td>&#x9009;&#x4E2D;xx&#x8282;&#x70B9;&#x4E0B;&#x7684;&#x6240;&#x6709;<strong>&#x5B50;&#x5B59;&#x8282;&#x70B9;</strong>yy&#x3002;&#x4E8C;&#x8005;&#x4E4B;&#x95F4;&#x662F;&#x7A7A;&#x683C;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx&gt;yy</td>
<td>&#x9009;&#x4E2D;xx&#x8282;&#x70B9;&#x4E0B;&#x7684;&#x6240;&#x6709;<strong>&#x5B50;&#x8282;&#x70B9;</strong>yy</td>
</tr>
<tr>
<td style="text-align:center">xx+yy</td>
<td>&#x9009;&#x4E2D;xx&#x8282;&#x70B9;&#x7684;&#x6240;&#x6709;<strong>&#x5144;&#x5F1F;&#x8282;&#x70B9;</strong>yy</td>
</tr>
<tr>
<td style="text-align:center">._class</td>
<td>&#x9009;&#x4E2D;class&#x5C5E;&#x6027;&#x4E3A;_class&#x7684;&#x8282;&#x70B9;&#x3002;&#x5982; &apos;div.info&apos; &#x8868;&#x793A;&#x9009;&#x4E2D;class=info&#x7684;div&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">#_id</td>
<td>&#x9009;&#x4E2D;id&#x4E3A;_id&#x7684;&#x8282;&#x70B9;&#x3002;&#x5982; &apos;div#main&apos; &#x8868;&#x793A;id=main&#x7684;div&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">[attr]</td>
<td>&#x9009;&#x4E2D;&#x5305;&#x542B;&#x5C5E;&#x6027;attr&#x7684;&#x8282;&#x70B9;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">[attr=value]</td>
<td>&#x9009;&#x4E2D;&#x5C5E;&#x6027;attr&#x4E3A;value&#x7684;&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">[attr*=value]</td>
<td>&#x9009;&#x4E2D;&#x5C5E;&#x6027;attr&#x7684;&#x503C;<strong>&#x5305;&#x542B;</strong>value&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5373;value&#x662F;attr&#x5C5E;&#x6027;&#x7684;&#x5B50;&#x4E32;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">a[href^=&quot;http&quot;]</td>
<td>&#x9009;&#x53D6;&#x6240;&#x6709;href&#x5C5E;&#x6027;&#x4EE5;http&#x5F00;&#x5934;&#x7684;a&#x5143;&#x7D20;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">a[href$=&quot;.jpg&quot;]</td>
<td>&#x9009;&#x53D6;&#x6240;&#x6709;href&#x5C5E;&#x6027;&#x4EE5;.jpg&#x7ED3;&#x5C3E;&#x7684;a&#x5143;&#x7D20;&#x3002;</td>
</tr>
<tr>
<td style="text-align:center">xx:nth-child(n)</td>
<td>&#x9009;&#x4E2D;&#x7B2C;n&#x4E2A;xx&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">xx:nth-last-child(n)</td>
<td>&#x9009;&#x4E2D;&#x5012;&#x6570;&#x7B2C;n&#x4E2A;xx&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">xx:first-child</td>
<td>&#x7B2C;&#x4E00;&#x4E2A;xx&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">xx:last-child</td>
<td>&#x6700;&#x540E;&#x4E00;&#x4E2A;xx&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">xx:empty</td>
<td>&#x6CA1;&#x6709;&#x5B50;&#x8282;&#x70B9;&#x7684;xx</td>
</tr>
<tr>
<td style="text-align:center">xx::text</td>
<td>xx&#x8282;&#x70B9;&#x7684;&#x6587;&#x672C;&#x8282;&#x70B9;</td>
</tr>
<tr>
<td style="text-align:center">xx::attr(href)</td>
<td>&#x9009;&#x53D6;xx&#x8282;&#x70B9;&#x7684;href&#x5C5E;&#x6027;</td>
</tr>
<tr>
<td style="text-align:center">div:not(#main)</td>
<td>&#x9009;&#x53D6;&#x6240;&#x6709;id&#x4E0D;&#x4E3A;main&#x7684;div&#x5143;&#x7D20;</td>
</tr>
</tbody>
</table>
<h3 id="3-re"><a name="3-re" class="anchor-navigation-ex-anchor" href="#3-re"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.3. 3. re</h3>
<p>&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x63D0;&#x53D6;&#x6587;&#x672C;&#x3002;</p>
<pre class="language-"><code class="lang-python"><span class="token comment"># &#x63D0;&#x53D6;&#x6240;&#x6709;&#x5355;&#x8BCD;</span>
response<span class="token punctuation">.</span>selector<span class="token punctuation">.</span>re<span class="token punctuation">(</span><span class="token string">r&apos;\w+&apos;</span><span class="token punctuation">)</span>
</code></pre>
<p>r&apos;.<em>&apos; &#x662F;&#x8D2A;&#x5A6A;&#x5339;&#x914D;&#xFF08;&#x6700;&#x957F;&#x5339;&#x914D;&#xFF09;&#xFF0C;r&apos;.\</em>?&apos; &#x662F;&#x975E;&#x8D2A;&#x5A6A;&#x5339;&#x914D;&#xFF08;&#x6700;&#x77ED;&#x5339;&#x914D;&#xFF09;&#x3002;</p>
<p>&apos;.&apos; &#x80FD;&#x5339;&#x914D;&#x9664;&#x4E86;&#x6362;&#x884C;&#x7B26;&#x7684;&#x4EFB;&#x4E00;&#x5B57;&#x7B26;&#x3002;</p>
<h3 id="4-linkextractor&#xFF1A;&#x53EA;&#x63D0;&#x53D6;&#x94FE;&#x63A5;"><a name="4-linkextractor&#xFF1A;&#x53EA;&#x63D0;&#x53D6;&#x94FE;&#x63A5;" class="anchor-navigation-ex-anchor" href="#4-linkextractor&#xFF1A;&#x53EA;&#x63D0;&#x53D6;&#x94FE;&#x63A5;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.4. 4. LinkExtractor&#xFF1A;&#x53EA;&#x63D0;&#x53D6;&#x94FE;&#x63A5;</h3>
<p>LinkExtractor&#x662F;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x63D0;&#x53D6;&#x94FE;&#x63A5;&#x7684;&#x7C7B;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x63D0;&#x53D6;&#x5927;&#x91CF;&#x94FE;&#x63A5;&#x6216;&#x63D0;&#x53D6;&#x89C4;&#x5219;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x7528;&#x6765;&#x63D0;&#x53D6;&#x9875;&#x9762;&#x4E2D;&#x7684;&#x94FE;&#x63A5;&#x3002;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>linkextractors <span class="token keyword">import</span> LinkExtractor     <span class="token comment"># &#x5B9E;&#x9645;&#x662F;LxmlLinkExtractor</span>

le <span class="token operator">=</span> LinkExtractor<span class="token punctuation">(</span>allow<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> deny<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> allow_domains<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> deny_domains<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                   restrict_xpaths<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tags<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;area&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> attrs<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&apos;href&apos;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   canonicalize<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> unique<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> process_value<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> 
                   deny_extensions<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> restrict_css<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

links <span class="token operator">=</span> le<span class="token punctuation">.</span>extract_links<span class="token punctuation">(</span>response<span class="token punctuation">)</span>  <span class="token comment"># &#x63D0;&#x53D6;&#x51FA;&#x6765;&#x7684;&#x662F;scrapy.link.Link&#x7684;&#x5217;&#x8868;&#x3002;&#x5F97;&#x5230;&#x7684;link&#x662F;&#x7EDD;&#x5BF9;&#x5730;&#x5740;&#x3002;</span>
links <span class="token operator">=</span> <span class="token punctuation">[</span>link<span class="token punctuation">.</span>url <span class="token keyword">for</span> link <span class="token keyword">in</span> links<span class="token punctuation">]</span><span class="token comment"># &#x83B7;&#x53D6;&#x94FE;&#x63A5;</span>
</code></pre>
<p>&#xFF1F;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x63D0;&#x53D6;&#x51FA;&#x7684;&#x94FE;&#x63A5;&#x5728;&#x672B;&#x5C3E;&#x53EF;&#x80FD;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x672C;&#x6765;&#x662F;&quot;baidu.com&quot;&#xFF0C;&#x7ED3;&#x679C;&#x53D8;&#x6210;&#x4E86;&quot;baidu.com/&quot;&#x3002;</p>
<p>&#x53C2;&#x6570;&#x89E3;&#x91CA;&#xFF1A;</p>
<ul>
<li>allow&#xFF1A;&#x4E00;&#x4E2A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6216;&#x4E00;&#x4E2A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5217;&#x8868;&#x3002;&#xFF1F;&#x6B63;&#x5219;&#x4E0D;&#x662F;&#x5B8C;&#x5168;&#x5339;&#x914D;&#xFF0C;&#x662F;&#x6709;&#x90E8;&#x5206;&#x5339;&#x914D;&#x5C31;OK&#x4E86;&#x3002;</li>
<li>deny&#xFF1A;&#x540C;allow&#xFF0C;&#x53EA;&#x662F;&#x610F;&#x601D;&#x76F8;&#x53CD;&#x3002;</li>
<li>allow_domain&#xFF1A;&#x4E00;&#x4E2A;&#x57DF;&#x540D;&#x6216;&#x5217;&#x8868;&#xFF0C;&#x63D0;&#x53D6;&#x6307;&#x5B9A;&#x57DF;&#x540D;&#x7684;link&#x3002;</li>
<li>restrict_xpaths&#xFF1A;&#x4E00;&#x4E2A;xpath&#x8868;&#x8FBE;&#x5F0F;&#x6216;&#x5217;&#x8868;&#x3002;&#x53EA;&#x80FD;&#x63D0;&#x53D6;&#x8BE5;&#x8868;&#x8FBE;&#x5F0F;&#x9009;&#x4E2D;&#x533A;&#x57DF;&#x4E0B;&#x7684;link&#x3002;</li>
<li>tags&#xFF1A;&#x7528;&#x4E8E;&#x63D0;&#x53D6;&#x6307;&#x5B9A;&#x6807;&#x7B7E;&#x4E2D;&#x7684;&#x94FE;&#x63A5;&#x3002;</li>
<li>attrs&#xFF1A;&#x53EA;&#x80FD;&#x63D0;&#x53D6;tags&#x4E2D;&#x7684;attrs&#x6807;&#x7B7E;&#x3002;</li>
<li>process_value&#xFF1A;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5BF9;&#x63D0;&#x53D6;&#x7684;&#x94FE;&#x63A5;&#xFF08;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x5982;&#x679C;&#x4E22;&#x5F03;&#x67D0;&#x4E2A;&#x94FE;&#x63A5;&#xFF0C;&#x8FD4;&#x56DE;None&#x3002;</li>
</ul>
<h2 id="item&#x5C01;&#x88C5;&#x6570;&#x636E;"><a name="item&#x5C01;&#x88C5;&#x6570;&#x636E;" class="anchor-navigation-ex-anchor" href="#item&#x5C01;&#x88C5;&#x6570;&#x636E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. item&#x5C01;&#x88C5;&#x6570;&#x636E;</h2>
<p>item&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;dict&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x652F;&#x6301;&#x5B57;&#x5178;&#x63A5;&#x53E3;&#x3002;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">import</span> scrapy

<span class="token keyword">class</span> <span class="token class-name">MyItem</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    age  <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>&#x5728;&#x5BF9;item&#x5BF9;&#x8C61;&#x8D4B;&#x503C;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5B57;&#x6BB5;&#x540D;&#x6CA1;&#x6709;&#x9884;&#x5148;&#x5B9A;&#x4E49;&#xFF0C;&#x5C06;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF08;&#x9632;&#x6B62;&#x7C97;&#x5FC3;&#x5C06;&#x5B57;&#x6BB5;&#x540D;&#x5199;&#x9519;&#xFF09;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;item&#x53EF;&#x4EE5;&#x4F7F;&#x7528;fields&#x5C5E;&#x6027;&#x52A8;&#x6001;&#x6DFB;&#x52A0;&#x5B57;&#x6BB5;&#xFF1A;</p>
<pre class="language-"><code class="lang-python">item <span class="token operator">=</span> Item<span class="token punctuation">(</span><span class="token punctuation">)</span>
item<span class="token punctuation">.</span>fields<span class="token punctuation">[</span><span class="token string">&apos;name&apos;</span><span class="token punctuation">]</span> <span class="token operator">=</span> Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>&#x5982;&#x679C;&#x60F3;&#x8981;&#x4F20;&#x9012;&#x989D;&#x5916;&#x4FE1;&#x606F;&#x7ED9;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#x67D0;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Field&#x7684;&#x5143;&#x6570;&#x636E;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">class</span> <span class="token class-name">MyItem</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> serializer<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">)</span>
</code></pre>
<pre class="language-"><code class="lang-bash"><span class="token operator">&gt;</span> it <span class="token operator">=</span> MyItem<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> it.fields
Out: <span class="token punctuation">{</span><span class="token string">&apos;x&apos;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&apos;len&apos;</span><span class="token builtin class-name">:</span> <span class="token number">20</span>, <span class="token string">&apos;serializer&apos;</span><span class="token builtin class-name">:</span> <span class="token operator">&lt;</span>function __main__.MyItem.<span class="token operator">&lt;</span>lambda<span class="token operator">&gt;&gt;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token operator">&gt;</span> it.fields<span class="token punctuation">[</span><span class="token string">&apos;x&apos;</span><span class="token punctuation">]</span>
Out: <span class="token punctuation">{</span><span class="token string">&apos;len&apos;</span><span class="token builtin class-name">:</span> <span class="token number">20</span>, <span class="token string">&apos;serializer&apos;</span><span class="token builtin class-name">:</span> <span class="token operator">&lt;</span>function __main__.MyItem.<span class="token operator">&lt;</span>lambda<span class="token operator">&gt;&gt;</span><span class="token punctuation">}</span>

<span class="token operator">&gt;</span> type<span class="token punctuation">(</span>it.fields<span class="token punctuation">[</span><span class="token string">&apos;x&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Out: scrapy.item.Field
</code></pre>
<p>&#x5143;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5BF9;Item&#x7684;&#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x9650;&#x5236;&#xFF1A;&#x5982;x&#x600E;&#x4E48;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x3002;</p>
<p>item&#x9664;&#x4E86;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x60F3;&#x8981;&#x7684;&#x4FE1;&#x606F;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x4FE1;&#x606F;&#xFF0C;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x8C03;&#x8BD5;&#x722C;&#x866B;&#xFF0C;&#x6BD4;&#x5982;&#x4F55;&#x5730;&#xFF08;url&#xFF09;&#x3001;&#x4F55;&#x65F6;&#xFF08;time&#xFF09;&#x3001;&#x4F7F;&#x7528;&#x90A3;&#x4E2A;&#x722C;&#x866B;&#xFF08;spider&#xFF09;&#x6293;&#x53D6;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<h3 id="itemloader"><a name="itemloader" class="anchor-navigation-ex-anchor" href="#itemloader"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.1. ItemLoader</h3>
<p>&#x5728;&#x722C;&#x866B;&#x4E2D;&#xFF0C;&#x6784;&#x9020;Item&#x9664;&#x4E86;&#x5148;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x586B;&#x5145;&#x76F8;&#x5E94;&#x5C5E;&#x6027;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;ItemLoader&#x6765;&#x5B8C;&#x6210;&#x3002;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>loader <span class="token keyword">import</span> ItemLoader
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>loader<span class="token punctuation">.</span>processors <span class="token keyword">import</span> MapCompose<span class="token punctuation">,</span> Join

l <span class="token operator">=</span> ItemLoader<span class="token punctuation">(</span>item<span class="token operator">=</span>myItem<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> response<span class="token operator">=</span>response<span class="token punctuation">)</span>
<span class="token comment"># l = ItemLoader(item=myItem(), selector=response.selector)</span>
l<span class="token punctuation">.</span>add_xpath<span class="token punctuation">(</span><span class="token string">&apos;name&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;//*[@id=&quot;name&quot;][1]/text()&apos;</span><span class="token punctuation">,</span> MapCompose<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">.</span>strip<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span>
           Join<span class="token punctuation">(</span>separator<span class="token operator">=</span><span class="token string">&apos;|&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># l.add_xpath(self, field_name, xpath, *processors, **kw)</span>
<span class="token comment"># l.add_css(...)</span>
<span class="token comment"># l.add_value(&apos;url&apos;, response.url)</span>

item <span class="token operator">=</span> l<span class="token punctuation">.</span>load_item<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>MapCompose&#x53EF;&#x4EE5;&#x586B;&#x5165;&#x51FD;&#x6570;&#x94FE;&#xFF0C;&#x7528;&#x4E8E;&#x5BF9;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6E05;&#x6D17;&#x3002;</p>
<h2 id="pipeline"><a name="pipeline" class="anchor-navigation-ex-anchor" href="#pipeline"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. pipeline</h2>
<p>pipeline&#x7684;&#x4F5C;&#x7528;&#xFF1A;</p>
<ol>
<li>&#x6E05;&#x6D17;&#x6570;&#x636E;</li>
<li><strong>&#x9A8C;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x6709;&#x6548;&#x6027;</strong></li>
<li><strong>&#x8FC7;&#x6EE4;&#x6389;&#x91CD;&#x590D;&#x7684;&#x6570;&#x636E;</strong></li>
<li>&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x6587;&#x4EF6;&#x6216;&#x6570;&#x636E;&#x5E93; </li>
</ol>
<p>pipeline&#x5B9A;&#x4E49;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">class</span> <span class="token class-name">MyPipeline</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    
        <span class="token comment"># &#x53EF;&#x9009;&#x5B9E;&#x73B0;&#xFF0C;&#x505A;&#x53C2;&#x6570;&#x521D;&#x59CB;&#x5316;&#x7B49;</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># item&#x662F;&#x722C;&#x53D6;&#x5230;&#x7684;&#x6570;&#x636E;&#xFF0C; spider&#x662F;&#x722C;&#x53D6;&#x5230;&#x8BE5;&#x6570;&#x636E;&#x7684;Spider&#x5BF9;&#x8C61;&#x3002;</span>
        <span class="token keyword">if</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> item
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> scrapy<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>Dropitem<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">open_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># &#x53EF;&#x9009;&#x5B9E;&#x73B0;&#xFF0C;&#x5F53;spider&#x88AB;&#x5F00;&#x542F;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;&#x3002;</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">close_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># &#x53EF;&#x9009;&#x5B9E;&#x73B0;&#xFF0C;&#x5F53;spider&#x88AB;&#x5173;&#x95ED;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x88AB;&#x8C03;&#x7528;</span>
        <span class="token keyword">pass</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">from_crawler</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> crawler<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> cls<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>process_item&#xFF1A;&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF0C;&#x5BF9;item&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x5982;&#x679C;item&#x4E0D;&#x9700;&#x8981;&#x7EE7;&#x7EED;&#x5728;&#x6D41;&#x6C34;&#x7EBF;&#x4E0A;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x629B;&#x51FA;DropItem&#x5F02;&#x5E38;&#xFF08;scrapy.exceptions.Dropitem)&#xFF0C;&#x8BE5;item&#x5C31;&#x4F1A;&#x88AB;&#x629B;&#x5F03;&#x3002;</li>
<li>from<em>crawler(cls, crawler)&#xFF1A;&#x901A;&#x5E38;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;crawler.settings&#x6765;&#x8BFB;&#x53D6;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x8C03;&#x7528;_<em>init</em></em>&#x65B9;&#x6CD5;&#x521B;&#x5EFA;Item Pipeline&#x5BF9;&#x8C61;&#x3002;</li>
<li>_<em>init_</em>(self)&#xFF1A;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x521D;&#x59CB;&#x5316;&#x67D0;&#x4E9B;&#x6570;&#x636E;&#x3002;&#x6BD4;&#x5982;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x6240;&#x6709;&#x7ECF;&#x8FC7;&#x8BE5;&#x6D41;&#x6C34;&#x7EBF;&#x7684;item&#xFF0C;&#x7136;&#x540E;&#x7528;&#x4E8E;&#x67E5;&#x91CD;&#x3002;</li>
</ul>
<p>&#x8FC7;&#x6EE4;&#x91CD;&#x590D;&#x6570;&#x636E;&#xFF1A;&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;set&#x3002;&#x7136;&#x540E;&#x5728;&#x5904;&#x7406;item&#x65F6;&#x5224;&#x65AD;&#x8BE5;&#x9879;&#x662F;&#x5426;&#x5728;set&#x4E2D;&#x3002;</p>
<h3 id="1-filespipeline"><a name="1-filespipeline" class="anchor-navigation-ex-anchor" href="#1-filespipeline"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.1. 1. FilesPipeline</h3>
<p>&#x914D;&#x7F6E;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token comment"># settings.py</span>
ITEM_PIPELINES <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&apos;scrapy.pipelines.files.FilesPipeline&apos;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
FILES_STORE <span class="token operator">=</span> <span class="token string">&apos;/path/to/valid/dir&apos;</span>  <span class="token comment"># &#x76F8;&#x5BF9;&#x4E8E;&#x9879;&#x76EE;&#x7684;&#x6839;&#x76EE;&#x5F55;&#xFF08;scrapy.cfg&#x6240;&#x5728;&#x76EE;&#x5F55;&#xFF09;</span>
</code></pre>
<p>&#x4E0B;&#x8F7D;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<ol>
<li>&#x5728;item&#x4E2D;&#x67E5;&#x627E;&quot;file_urls&quot;&#x5B57;&#x6BB5;&#xFF08;&#x662F;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#xFF09;&#x3002;</li>
<li>&#x6839;&#x636E;&quot;file_urls&quot;&#x5B57;&#x6BB5;&#x4E0B;&#x8F7D;&#x76F8;&#x5E94;&#x7684;&#x6587;&#x4EF6;&#x3002;</li>
<li>&#x5411;item&#x6DFB;&#x52A0;&#x5B57;&#x6BB5;&apos;files&apos;&#xFF0C;&#x5B58;&#x653E;&#x4E0B;&#x8F7D;&#x7ED3;&#x679C;&#x3002;&#x4E3B;&#x8981;&#x6709;&#xFF1A;<ol>
<li>Path&#xFF1A;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x5230;&#x672C;&#x5730;&#x7684;&#x8DEF;&#x5F84;&#xFF08;&#x76F8;&#x5BF9;&#x4E8E;&quot;FILES_STORE&quot;&#x7684;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF09;&#x3002;</li>
<li>Checksum&#xFF1A;&#x6587;&#x4EF6;&#x7684;&#x6821;&#x9A8C;&#x548C;&#x3002;</li>
<li>url&#xFF1A;&#x6587;&#x4EF6;&#x7684;url&#x5730;&#x5740;&#x3002;</li>
</ol>
</li>
</ol>
<p>&#x4E0B;&#x8F7D;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x4E3A;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token comment"># SHA1_HASH_VALUE&#x4E3A;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;url&#x7684;sha1&#x6563;&#x5217;&#x503C;&#x3002;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x91CD;&#x540D;&#x6587;&#x4EF6;&#x8986;&#x76D6;&#x3002;</span>
<span class="token punctuation">[</span>FILES_STORE<span class="token punctuation">]</span><span class="token operator">/</span>full<span class="token operator">/</span><span class="token punctuation">[</span>SHA1_HASH_VALUE<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token builtin">format</span><span class="token punctuation">]</span>
</code></pre>
<p>&#x91CD;&#x8F7D;&#x547D;&#x540D;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse
<span class="token keyword">import</span> os

<span class="token keyword">class</span> <span class="token class-name">MyPipeline</span><span class="token punctuation">(</span>FilesPipeline<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">file_path</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> info<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># &#x6839;&#x636E;request&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#xFF08;&#x5B57;&#x7B26;&#x4E32;&#xFF09;</span>
        <span class="token comment"># &#x4F20;&#x8FDB;&#x6765;&#x7684;request&#x53EF;&#x80FD;&#x662F;&#x4E00;&#x4E2A;url</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> Request<span class="token punctuation">)</span><span class="token punctuation">:</span>
            url <span class="token operator">=</span> request
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            url <span class="token operator">=</span> request<span class="token punctuation">.</span>url
        path <span class="token operator">=</span> urlparse<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>path <span class="token comment"># &#x5F97;&#x5230;url&#x4E2D;&#x7684;&#x8DEF;&#x5F84;&#x90E8;&#x5206;(&#x9664;&#x53BB;&#x57DF;&#x540D;&#x3001;&#x53C2;&#x6570;&#x7B49;)</span>
        <span class="token builtin">dir</span> <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>path<span class="token punctuation">)</span>
        name <span class="token operator">=</span>  os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>path<span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token string">&apos;xxx&apos;</span>
</code></pre>
<h3 id="2-imagespipeline"><a name="2-imagespipeline" class="anchor-navigation-ex-anchor" href="#2-imagespipeline"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.2. 2. ImagesPipeline</h3>
<p>ImagesPipeline&#x662F;FilesPipeline&#x7684;&#x5B50;&#x7C7B;&#x3002;</p>
<p>&#x4F7F;&#x7528;&#x4E0A;&#x5927;&#x81F4;&#x76F8;&#x4F3C;&#xFF0C;&#x53EA;&#x662F;item&#x5B57;&#x6BB5;&#x7531;&quot;file_urls&quot;&#x3001;&quot;files&quot;&#x53D8;&#x6210;&#x4E86;&quot;image_urls&quot;&#x3001;&quot;images&quot;&#x3002;</p>
<p>&#x914D;&#x7F6E;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token comment"># settings.py</span>
ITEM_PIPELINES <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&apos;scrapy.pipelines.images.ImagesPipeline&apos;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
IMAGES_STORE <span class="token operator">=</span> <span class="token string">&apos;/path/to/valid/dir&apos;</span>

<span class="token comment"># &#x751F;&#x6210;&#x7F29;&#x7565;&#x56FE;</span>
THUMBS <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&apos;small&apos;</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&apos;big&apos;</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token number">270</span><span class="token punctuation">,</span><span class="token number">270</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment"># &#x8FC7;&#x6EE4;&#x6389;&#x957F;&#x5BBD;&#x4E0D;&#x7B26;&#x5408;&#x8981;&#x6C42;&#x7684;&#x56FE;&#x7247;</span>
IMAGES_MIN_WIDTH <span class="token operator">=</span> <span class="token number">110</span>
IMAGES_MAX_WIDTH <span class="token operator">=</span> <span class="token number">110</span>
</code></pre>
<h2 id="extension"><a name="extension" class="anchor-navigation-ex-anchor" href="#extension"><i class="fa fa-link" aria-hidden="true"></i></a>1.7. extension</h2>
<h3 id="1-exporter"><a name="1-exporter" class="anchor-navigation-ex-anchor" href="#1-exporter"><i class="fa fa-link" aria-hidden="true"></i></a>1.7.1. 1. Exporter</h3>
<p>&#x5DF2;&#x6709;&#x5B9E;&#x73B0;&#xFF1A;</p>
<ol>
<li>json</li>
<li>json lines&#xFF1A;jsonlines&#x6216;jl&#x3002;</li>
<li>csv</li>
<li>xml</li>
<li>pickle</li>
<li>marshal</li>
</ol>
<p>&#x524D;4&#x79CD;&#x4E3A;&#x5E38;&#x7528;&#x683C;&#x5F0F;&#xFF0C;&#x540E;2&#x4E2D;&#x4E3A;python&#x7279;&#x6709;&#x3002;</p>
<p>&#x914D;&#x7F6E;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token comment"># &#x4F4D;&#x4E8E;scrapy.settings.default_settings&#x6A21;&#x5757;</span>
FEED_EXPORTERS_BASE <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&apos;json&apos;</span><span class="token punctuation">:</span> <span class="token string">&apos;scrapy.exporters.JsonItemExporter&apos;</span><span class="token punctuation">,</span>
    <span class="token comment"># ...</span>
<span class="token punctuation">}</span>

<span class="token comment"># settings.py</span>
FEED_EXPORTERS <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&apos;myjson&apos;</span><span class="token punctuation">:</span> <span class="token string">&apos;MyItemExporter&apos;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5982;&#x679C;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x7EE7;&#x627F;BaseItemExporter&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>exporters <span class="token keyword">import</span> BaseItemExporter

<span class="token keyword">def</span> <span class="token function">MyItemExporter</span><span class="token punctuation">(</span>BaseItemExporter<span class="token punctuation">)</span><span class="token punctuation">:</span>
     <span class="token keyword">def</span> <span class="token function">export_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># &#x8D1F;&#x8D23;&#x5BFC;&#x51FA;&#x6570;&#x636E;</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">start_exporting</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># &#x5728;&#x5BFC;&#x51FA;&#x5F00;&#x59CB;&#x65F6;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x7528;&#x4E8E;&#x67D0;&#x4E9B;&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x4F5C;</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">finish_exporting</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
</code></pre>
<h2 id="&#x6A21;&#x62DF;&#x767B;&#x9646;"><a name="&#x6A21;&#x62DF;&#x767B;&#x9646;" class="anchor-navigation-ex-anchor" href="#&#x6A21;&#x62DF;&#x767B;&#x9646;"><i class="fa fa-link" aria-hidden="true"></i></a>1.8. &#x6A21;&#x62DF;&#x767B;&#x9646;</h2>
<h3 id="1-&#x6784;&#x9020;&#x8868;&#x5355;"><a name="1-&#x6784;&#x9020;&#x8868;&#x5355;" class="anchor-navigation-ex-anchor" href="#1-&#x6784;&#x9020;&#x8868;&#x5355;"><i class="fa fa-link" aria-hidden="true"></i></a>1.8.1. 1. &#x6784;&#x9020;&#x8868;&#x5355;</h3>
<p>scrapy&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;FormRequest&#x7C7B;&#xFF08;Request&#x7684;&#x5B50;&#x7C7B;&#xFF09;&#xFF0C;&#x7528;&#x4E8E;&#x6784;&#x9020;&#x542B;&#x6709;&#x8868;&#x5355;&#x7684;&#x8BF7;&#x6C42;&#x3002;</p>
<p>&#x6784;&#x9020;FormRequest&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>http <span class="token keyword">import</span> FormRequest
fd <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&apos;username&apos;</span><span class="token punctuation">:</span><span class="token string">&apos;xxx&apos;</span><span class="token punctuation">,</span>
    <span class="token string">&apos;password&apos;</span><span class="token punctuation">:</span><span class="token string">&apos;xxx&apos;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
request <span class="token operator">=</span> FormRequest<span class="token punctuation">.</span>from_response<span class="token punctuation">(</span>response<span class="token punctuation">,</span> formdata<span class="token operator">=</span>fd<span class="token punctuation">)</span> <span class="token comment"># &#x9690;&#x85CF;&#x7684;&#x8868;&#x5355;&#x9879;&#x4F1A;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x3002;</span>
</code></pre>
<h3 id="2-&#x4F7F;&#x7528;cookie"><a name="2-&#x4F7F;&#x7528;cookie" class="anchor-navigation-ex-anchor" href="#2-&#x4F7F;&#x7528;cookie"><i class="fa fa-link" aria-hidden="true"></i></a>1.8.2. 2. &#x4F7F;&#x7528;Cookie</h3>
<p><a href="#%201.1%20Cookie&#x4E2D;&#x95F4;&#x4EF6;">&#x8BE6;&#x60C5;&#x89C1;Cookie&#x4E2D;&#x95F4;&#x4EF6;</a></p>
<h2 id="&#x6570;&#x636E;&#x5B58;&#x50A8;"><a name="&#x6570;&#x636E;&#x5B58;&#x50A8;" class="anchor-navigation-ex-anchor" href="#&#x6570;&#x636E;&#x5B58;&#x50A8;"><i class="fa fa-link" aria-hidden="true"></i></a>1.9. &#x6570;&#x636E;&#x5B58;&#x50A8;</h2>
<p>&#x4E3B;&#x8981;&#x6709;SQLite&#x3001;MySQL&#x3001;MongoDB&#x3001;Redis&#x3002;</p>
<h3 id="1-sqlite"><a name="1-sqlite" class="anchor-navigation-ex-anchor" href="#1-sqlite"><i class="fa fa-link" aria-hidden="true"></i></a>1.9.1. 1. SQLite</h3>
<p>&#x5728;python3&#x4E2D;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">import</span> sqlite3

conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">&apos;example.db&apos;</span><span class="token punctuation">)</span>
cur <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&apos;insert into person values(%s,%s)&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="2-mysql"><a name="2-mysql" class="anchor-navigation-ex-anchor" href="#2-mysql"><i class="fa fa-link" aria-hidden="true"></i></a>1.9.2. 2. mysql</h3>
<p>python3&#x6709;pymysql&#x3001;mysqlclient&#x5305;&#x3002;</p>
<p>&#x5728;python2&#x4E2D;&#x4F7F;&#x7528;MySQLdb&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5728;python&#x4E2D;&#x4F7F;&#x7528;mysqlclient&#x4F5C;&#x4E3A;&#x66FF;&#x4EE3;&#xFF0C;&#x63D0;&#x4F9B;&#x51E0;&#x4E4E;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x63A5;&#x53E3;&#x3002;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">import</span> MySQLdb <span class="token comment"># &#x5728;python3&#x4E2D;&#xFF0C;&#x5B9E;&#x9645;&#x5B89;&#x88C5;&#x7684;&#x662F;mysqlclient&#x5305;</span>
<span class="token keyword">import</span> pymysql

conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&apos;localhost&apos;</span><span class="token punctuation">,</span> db<span class="token operator">=</span><span class="token string">&apos;example&apos;</span><span class="token punctuation">,</span> user<span class="token operator">=</span><span class="token string">&apos;root&apos;</span><span class="token punctuation">,</span>
                      passwd<span class="token operator">=</span><span class="token string">&apos;xxx&apos;</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">&apos;utf8&apos;</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
conn = pymysql.connect(host=&apos;localhost&apos;, port=3306, db=&apos;example&apos;, 
                       user=&apos;root&apos;,passwd=&apos;xxx&apos;, charset=&apos;utf8&apos;)
&quot;&quot;&quot;</span>
cur <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&apos;[SQL statement]&apos;</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="3-mongodb"><a name="3-mongodb" class="anchor-navigation-ex-anchor" href="#3-mongodb"><i class="fa fa-link" aria-hidden="true"></i></a>1.9.3. 3. mongodb</h3>
<p>mongodb&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6570;&#x636E;&#x4EE5;&#x952E;&#x503C;&#x5BF9;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#x3002;</p>
<p>&#x6570;&#x636E;&#x7EC4;&#x7EC7;&#xFF1A;&#x5E93;&#xFF08;database&#xFF09; -&gt; &#x96C6;&#x5408;&#xFF08;collections&#xFF09; -&gt; &#x6587;&#x6863;&#xFF08;document&#xFF09;</p>
<p>windows&#x4E0A;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;mongodb&#x7684;&#x7BA1;&#x7406;&#x8F6F;&#x4EF6;RoboMongo&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;mongodb&#x53EA;&#x5141;&#x8BB8;&#x672C;&#x673A;&#x8BBF;&#x95EE;&#x3002;&#x5982;&#x9700;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#xFF0C;&#x9700;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># mongod.conf</span>

<span class="token comment"># bindIp: 127.0.0.1</span>
bindIp: <span class="token number">0.0</span>.0.0
</code></pre>
<p>&#x5982;&#x975E;&#x5FC5;&#x8981;&#xFF0C;&#x522B;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;mongodb&#x3002;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> pymongo <span class="token keyword">import</span> MongoClient

uri <span class="token operator">=</span> <span class="token string">&quot;mongodb://[user]:[passwd]@[localhost]:27017&quot;</span>
client <span class="token operator">=</span> MongoClient<span class="token punctuation">(</span><span class="token string">&quot;mongodb://localhost:27017&quot;</span><span class="token punctuation">)</span>
db <span class="token operator">=</span> client<span class="token punctuation">[</span><span class="token string">&apos;example_db&apos;</span><span class="token punctuation">]</span>
db<span class="token punctuation">[</span><span class="token string">&apos;example_collection&apos;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>insert_one<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&apos;name&apos;</span><span class="token punctuation">:</span><span class="token string">&apos;xx&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;age&apos;</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="4-redis"><a name="4-redis" class="anchor-navigation-ex-anchor" href="#4-redis"><i class="fa fa-link" aria-hidden="true"></i></a>1.9.4. 4. Redis</h3>
<p>redis&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x5185;&#x5B58;&#x7684;&#x975E;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x3002;redis&#x4EE5;&#x952E;&#x503C;&#x5BF9;&#xFF08;key-value&#xFF09;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x53EA;&#x80FD;&#x88AB;&#x672C;&#x673A;&#x8BBF;&#x95EE;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># /etc/redis.conf</span>

<span class="token comment"># bind 127.0.0.1</span>
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0

<span class="token comment"># protected-mode yes</span>
protected-mode no

<span class="token comment"># requirepass foobared</span>
requirepass <span class="token punctuation">[</span>my_password<span class="token punctuation">]</span>
</code></pre>
<p>&#x6CE8;&#xFF1A;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;redis&#x98CE;&#x9669;&#x6781;&#x5927;&#xFF0C;&#x8BF7;&#x8C28;&#x614E;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x952E;&#x503C;&#x5BF9;&#x4E2D;&#x7684;&#x503C;&#x4E3B;&#x8981;&#x6709;5&#x79CD;&#x7C7B;&#x578B;&#xFF1A;</p>
<ol>
<li>&#x5B57;&#x7B26;&#x4E32;&#xFF08;string&#xFF09;&#xFF1A;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x5B57;&#x7B26;&#x4E32;&#x3001;&#x6574;&#x6570;&#x3001;&#x6D6E;&#x70B9;&#x6570;&#xFF08;&#x6570;&#x5B57;&#x4E5F;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x3002;</li>
<li>&#x54C8;&#x5E0C;&#xFF08;hash&#xFF09;&#xFF1A;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x591A;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5176;&#x4E2D;&#x7684;&#x952E;&#x503C;&#x90FD;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
<li>&#x5217;&#x8868;&#xFF08;list&#xFF09;</li>
<li>&#x96C6;&#x5408;&#xFF08;set&#xFF09;</li>
<li>&#x6709;&#x5E8F;&#x96C6;&#x5408;&#xFF08;zset&#xFF09;</li>
</ol>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> redis <span class="token keyword">import</span> StrictRedis

conn <span class="token operator">=</span> StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&apos;127.0.0.1&apos;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">,</span> db<span class="token operator">=</span>redis_db_index<span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>hset<span class="token punctuation">(</span><span class="token string">&apos;person&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;xiaoming&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&apos;name&apos;</span><span class="token punctuation">:</span><span class="token string">&apos;xx&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;age&apos;</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>connection_pool<span class="token punctuation">.</span>disconnect<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="5-&#x5F02;&#x6B65;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;"><a name="5-&#x5F02;&#x6B65;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;" class="anchor-navigation-ex-anchor" href="#5-&#x5F02;&#x6B65;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;"><i class="fa fa-link" aria-hidden="true"></i></a>1.9.5. 5. &#x5F02;&#x6B65;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;</h3>
<p>Twisted&#x63D0;&#x4F9B;&#x4E86;&#x4EE5;&#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#x591A;&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6A21;&#x5757;adbapi&#x3002;&#x4F7F;&#x7528;&#x8BE5;&#x6A21;&#x5757;&#x53EF;&#x4EE5;&#x663E;&#x8457;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6548;&#x7387;&#x3002;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> twisted<span class="token punctuation">.</span>enterprise <span class="token keyword">import</span> adbapi

<span class="token comment"># adbapi&#x53EA;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7F16;&#x7A0B;&#x6846;&#x67B6;&#xFF0C;&#x5185;&#x90E8;&#x4F9D;&#x65E7;&#x4F7F;&#x7528;MySQLdb&#x3001;sqlite3&#x8FD9;&#x6837;&#x7684;&#x5E93;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x5E93;</span>
dbpool <span class="token operator">=</span> adbapi<span class="token punctuation">.</span>ConnectionPool<span class="token punctuation">(</span><span class="token string">&apos;MySQLdb&apos;</span><span class="token punctuation">,</span> host<span class="token operator">=</span><span class="token string">&apos;localhost&apos;</span><span class="token punctuation">,</span> database<span class="token operator">=</span><span class="token string">&apos;example&apos;</span><span class="token punctuation">,</span> 
                               user<span class="token operator">=</span><span class="token string">&apos;root&apos;</span><span class="token punctuation">,</span> passwd<span class="token operator">=</span><span class="token string">&apos;xxx&apos;</span><span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">&apos;utf8&apos;</span><span class="token punctuation">)</span>

<span class="token comment"># &#x8BE5;&#x51FD;&#x6570;&#x5C06;&#x88AB;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x3002;tx&#x662F;&#x4E00;&#x4E2A;Transaction&#x5BF9;&#x8C61;&#xFF0C;&#x5176;&#x63A5;&#x53E3;&#x4E0E;cursor&#x7C7B;&#x4F3C;&#x3002;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x5B8C;&#x540E;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;commit</span>
<span class="token keyword">def</span> <span class="token function">insert_db</span><span class="token punctuation">(</span>tx<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name<span class="token punctuation">,</span> age <span class="token operator">=</span> item
    tx<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&apos;insert into person values(%s,%s)&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">)</span>

dbpool<span class="token punctuation">.</span>runInteraction<span class="token punctuation">(</span>insert_db<span class="token punctuation">,</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">)</span>
dpool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="&#x7F51;&#x7EDC;&#x4EE3;&#x7406;"><a name="&#x7F51;&#x7EDC;&#x4EE3;&#x7406;" class="anchor-navigation-ex-anchor" href="#&#x7F51;&#x7EDC;&#x4EE3;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>1.10. &#x7F51;&#x7EDC;&#x4EE3;&#x7406;</h2>
<p>&#x722C;&#x866B;&#x4F7F;&#x7528;&#x4EE3;&#x7406;&#x7684;&#x539F;&#x56E0;&#xFF1A;</p>
<ul>
<li>&#x76F4;&#x63A5;&#x722C;&#x53D6;&#x901F;&#x5EA6;&#x592A;&#x6162;&#xFF0C;&#x4F7F;&#x7528;&#x4EE3;&#x7406;&#x63D0;&#x9AD8;&#x722C;&#x53D6;&#x901F;&#x5EA6;&#x3002;</li>
<li>&#x7F51;&#x7AD9;&#x5BF9;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x9650;&#x901F;&#xFF0C;&#x722C;&#x53D6;&#x8FC7;&#x5FEB;&#x4F1A;&#x5C01;ip&#x3002;</li>
<li>&#x67D0;&#x4E9B;&#x7F51;&#x7AD9;&#x88AB;&#x5899;&#xFF0C;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x3002;</li>
</ul>
<p><a href="#%201.2%20HTTP&#x4EE3;&#x7406;&#x4E2D;&#x95F4;&#x4EF6;">scrapy&#x4E2D;&#x89C1;HTTP&#x4EE3;&#x7406;&#x4E2D;&#x95F4;&#x4EF6;</a></p>
<h2 id="&#x4E2D;&#x95F4;&#x4EF6;"><a name="&#x4E2D;&#x95F4;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#&#x4E2D;&#x95F4;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.11. &#x4E2D;&#x95F4;&#x4EF6;</h2>
<p>&#x4E2D;&#x95F4;&#x4EF6;&#xFF1A;&#x5BF9;&#x7ECF;&#x8FC7;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x3001;&#x4E22;&#x5F03;&#x3001;&#x65B0;&#x589E;&#x64CD;&#x4F5C;&#x3002;</p>
<p> scrapy&#x4E2D;&#x95F4;&#x4EF6;&#x4E2D;&#xFF0C;&#x5904;&#x7406;request&#x8BF7;&#x6C42;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x503C;&#xFF1A;</p>
<ul>
<li><p>None&#xFF1A;&#x5C06;&#x8BF7;&#x6C42;&#x4EA4;&#x7ED9;&#x540E;&#x7EED;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p>
</li>
<li><p>Request&#xFF1A;&#x5C06;&#x8BF7;&#x6C42;&#x4EA4;&#x7ED9;&#x8C03;&#x5EA6;&#x5668;&#x91CD;&#x65B0;&#x8C03;&#x5EA6;&#xFF0C;&#x5E76;&#x7EC8;&#x6B62;&#x540E;&#x7EED;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x6267;&#x884C;&#xFF1B;</p>
</li>
<li><p>Response&#xFF1A;&#x7EC8;&#x6B62;&#x540E;&#x7EED;&#x4E2D;&#x95F4;&#x4EF6;&#x53CA;&#x4E0B;&#x8F7D;&#x5668;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x76F4;&#x63A5;&#x5C06;Response&#x4EA4;&#x7ED9;&#x5F15;&#x64CE;&#x3002;</p>
</li>
<li><p>Exception&#xFF1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</p>
</li>
</ul>
<p> scrapy&#x4E2D;&#x95F4;&#x4EF6;&#x4E2D;&#xFF0C;&#x5904;&#x7406;response&#x54CD;&#x5E94;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x503C;&#xFF1A;</p>
<ul>
<li><p>Request&#xFF1A;&#x7EC8;&#x6B62;&#x540E;&#x7EED;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x91CD;&#x65B0;&#x4EA4;&#x7ED9;&#x8C03;&#x5EA6;&#x5668;&#x8FDB;&#x884C;&#x8C03;&#x5EA6;&#x3002;</p>
</li>
<li><p>Response&#xFF1A;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x540E;&#x7EED;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;</p>
</li>
<li><p>Exception&#xFF1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</p>
</li>
</ul>
<h3 id="1-&#x4E0B;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;"><a name="1-&#x4E0B;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#1-&#x4E0B;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.11.1. 1. &#x4E0B;&#x8F7D;&#x4E2D;&#x95F4;&#x4EF6;</h3>
<p>&#x7528;&#x9014;&#xFF1A;</p>
<ol>
<li>&#x4EE3;&#x7406;&#x4E2D;&#x95F4;&#x4EF6;</li>
<li>User-Agent&#x4E2D;&#x95F4;&#x4EF6;</li>
<li>Cookies&#x4E2D;&#x95F4;&#x4EF6;</li>
<li>&#x96C6;&#x6210;selenium&#x7684;&#x4E2D;&#x95F4;&#x4EF6;</li>
<li>&#x5BF9;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#x8FDB;&#x884C;&#x91CD;&#x8BD5;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;</li>
<li>&#x5BF9;&#x8BF7;&#x6C42;&#x5F02;&#x5E38;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;</li>
</ol>
<h4 id="11-cookie&#x4E2D;&#x95F4;&#x4EF6;"><a name="11-cookie&#x4E2D;&#x95F4;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#11-cookie&#x4E2D;&#x95F4;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1 Cookie&#x4E2D;&#x95F4;&#x4EF6;</h4>
<pre class="language-"><code class="lang-python">scrapy<span class="token punctuation">.</span>http<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>CookieJar <span class="token comment"># 1</span>
http<span class="token punctuation">.</span>cookiejar<span class="token punctuation">.</span>CookieJar      <span class="token comment"># 2</span>

http<span class="token punctuation">.</span>cookiejar<span class="token punctuation">.</span>Cookie          <span class="token comment"># 3</span>
</code></pre>
<p>1&#x662F;&#x5BF9;2&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x4F7F;&#x7528;1.jar&#x5C31;&#x53EF;&#x4EE5;&#x7684;&#x5230;2&#x3002;&#x800C;2&#x662F;&#x7531;&#x591A;&#x4E2A;Cookie&#xFF08;3&#xFF09;&#x7EC4;&#x6210;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5FAA;&#x73AF;&#x904D;&#x5386;Cookie&#x3002;</p>
<p>Cookie&#x6709;&#x591A;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x5982;name&#x3001;value&#x3001;domain&#x3001;path&#x3001;expires&#x7B49;&#x3002;</p>
<p>Request&#x901A;&#x8FC7;meta&#x5C5E;&#x6027;&#x4E2D;&#x7684;&apos;cookiejar&apos;&#x6307;&#x5B9A;&#x4F7F;&#x7528;CookiesMiddleware&#x4E2D;&#x7684;&#x54EA;&#x4E00;&#x4E2A;CookieJar&#x3002;</p>
<h4 id="12-http&#x4EE3;&#x7406;&#x4E2D;&#x95F4;&#x4EF6;"><a name="12-http&#x4EE3;&#x7406;&#x4E2D;&#x95F4;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#12-http&#x4EE3;&#x7406;&#x4E2D;&#x95F4;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2 HTTP&#x4EE3;&#x7406;&#x4E2D;&#x95F4;&#x4EF6;</h4>
<p>HttpProxyMiddleware&#x662F;&#x9ED8;&#x8BA4;&#x5F00;&#x542F;&#x7684;&#xFF0C;&#x5B83;&#x4F1A;&#x4ECE;&#x7CFB;&#x7EDF;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x4E2D;&#x641C;&#x7D22;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x4EE3;&#x7406;&#xFF08;&#x540D;&#x5B57;&#x683C;&#x5F0F;&#x4E3A;xxx_proxy&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF09;&#xFF0C;&#x4F5C;&#x4E3A;Scrapy&#x722C;&#x866B;&#x7684;&#x4EE3;&#x7406;&#x3002;</p>
<p>scrapy&#x4E2D;&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684; url &#x586B;&#x5199;&#x5230; request.meta[&apos;proxy&apos;] &#x4E2D;&#x3002;</p>
<p>HttpProxyMiddleware&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x534F;&#x8BAE;&#xFF08;&#x5982;http&#xFF09;&#xFF0C;&#x53EA;&#x80FD;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x4EE3;&#x7406;&#x3002;&#x4E3A;&#x4E86;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x4EE3;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684; url &#x6DFB;&#x52A0;&#x8FDB;request&#x8BF7;&#x6C42;&#x7684;meta[&apos;proxy&apos;] &#x4E2D;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x591A;&#x4E2A;&#x4EE3;&#x7406;&#x3002;&#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x5982;&#x679C;&#x4EE3;&#x7406;&#x5B58;&#x5728;&#x9A8C;&#x8BC1;&#x73AF;&#x8282;&#x7684;&#x8BDD;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x624B;&#x52A8;&#x5C06; &quot;user:passwd&quot; &#x8FDB;&#x884C;&#x7F16;&#x7801;&#xFF0C;&#x653E;&#x5165;&#x8BF7;&#x6C42;&#x5934;&#x7684; Proxy-Authorization &#x4E2D;&#x3002;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6E90;&#x7801;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x5728;linux&#x4E0A;&#x642D;&#x5EFA;&#x597D;&#x4E86;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># &#x8FD9;&#x6837;&#x53EA;&#x662F;&#x4E34;&#x65F6;&#x8BBE;&#x7F6E;&#xFF0C;&#x5728;shell&#x5173;&#x95ED;&#x65F6;&#x5931;&#x6548;&#x3002;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span><span class="token string">&quot;http://123.123.123.123:1234&quot;</span>     <span class="token comment"># http&#x4EE3;&#x7406;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">https_proxy</span><span class="token operator">=</span><span class="token string">&quot;http://123.123.123.123:12345&quot;</span>   <span class="token comment"># https&#x4EE3;&#x7406;</span>

<span class="token comment"># &#x5E26;&#x9A8C;&#x8BC1;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span><span class="token string">&quot;http://user:passwd@123.123.123.123:1234&quot;</span>     <span class="token comment"># http&#x4EE3;&#x7406;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">https_proxy</span><span class="token operator">=</span><span class="token string">&quot;http://user:passwd@123.123.123.123:12345&quot;</span>   <span class="token comment"># https&#x4EE3;&#x7406;</span>
</code></pre>
<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href="http://httpbin.org/&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#x6765;&#x7AA5;&#x89C6;&#x6211;&#x4EEC;&#x53D1;&#x9001;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x6E90;ip&#x5730;&#x5740;&#x3001;&#x8BF7;&#x6C42;&#x5934;&#x90E8;&#x3001;Cookie&#x7B49;&#x4FE1;&#x606F;&#x3002;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x9A8C;&#x8BC1;&#x4EE3;&#x7406;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;" target="_blank">http://httpbin.org/&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#x6765;&#x7AA5;&#x89C6;&#x6211;&#x4EEC;&#x53D1;&#x9001;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x6E90;ip&#x5730;&#x5740;&#x3001;&#x8BF7;&#x6C42;&#x5934;&#x90E8;&#x3001;Cookie&#x7B49;&#x4FE1;&#x606F;&#x3002;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x9A8C;&#x8BC1;&#x4EE3;&#x7406;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;</a></p>
<p>&#x8BBF;&#x95EE; <a href="http://httpbin.org/ip" target="_blank">http://httpbin.org/ip</a> &#xFF0C;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x8BF7;&#x6C42;&#x6E90;IP&#x5730;&#x5740;&#x4FE1;&#x606F;&#x7684;json&#x4E32;&#x3002;</p>
<p>&#x83B7;&#x53D6;&#x514D;&#x8D39;&#x4EE3;&#x7406;&#x7684;&#x7F51;&#x7AD9;&#xFF1A;</p>
<ul>
<li><a href="http://proxy-list.org/" target="_blank">http://proxy-list.org/</a> &#xFF08;&#x56FD;&#x5916;&#xFF09;</li>
<li><a href="https://free-proxy-list.org/" target="_blank">https://free-proxy-list.org/</a> &#xFF08;&#x56FD;&#x5916;&#xFF09;</li>
<li><a href="http://www.xicidaili.com" target="_blank">http://www.xicidaili.com</a></li>
<li><a href="http://www.proxy360.cn" target="_blank">http://www.proxy360.cn</a></li>
<li><a href="http://www.kuaidaili.com" target="_blank">http://www.kuaidaili.com</a></li>
</ul>
<h3 id="2-&#x722C;&#x866B;&#x4E2D;&#x95F4;&#x4EF6;"><a name="2-&#x722C;&#x866B;&#x4E2D;&#x95F4;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#2-&#x722C;&#x866B;&#x4E2D;&#x95F4;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.11.2. 2. &#x722C;&#x866B;&#x4E2D;&#x95F4;&#x4EF6;</h3>
<p>&#x4F5C;&#x7528;&#xFF1A;</p>
<ol>
<li>&#x5904;&#x7406;&#x722C;&#x866B;&#x672C;&#x8EAB;&#x7684;&#x5F02;&#x5E38;</li>
</ol>
<h2 id="settings"><a name="settings" class="anchor-navigation-ex-anchor" href="#settings"><i class="fa fa-link" aria-hidden="true"></i></a>1.12. settings</h2>
<p>&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;scrapy&#x4E2D;settings&#x53C2;&#x6570;&#x6709;&#x56DB;&#x4E2A;&#x7EA7;&#x522B;&#xFF1A;</p>
<ol>
<li>&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;(Command line Options)&#xFF08;&#x6700;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#xFF09;&#xFF1A;<code>scrapy crawl somespider -s LOG_FILE=t.log</code></li>
<li>&#x9879;&#x76EE;&#x8BBE;&#x5B9A;&#x6A21;&#x5757;(Project settings module)&#xFF1A;custom_settings</li>
<li>&#x547D;&#x4EE4;&#x9ED8;&#x8BA4;&#x8BBE;&#x5B9A;&#x6A21;&#x5757;(Default settings per-command)&#xFF1A;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x4E0B;&#x7684;settings&#x6587;&#x4EF6;&#x3002;</li>
<li>&#x5168;&#x5C40;&#x9ED8;&#x8BA4;&#x8BBE;&#x5B9A;(Default global settings) (&#x6700;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;)</li>
</ol>
<h3 id="customsettings"><a name="customsettings" class="anchor-navigation-ex-anchor" href="#customsettings"><i class="fa fa-link" aria-hidden="true"></i></a>1.12.1. custom_settings</h3>
<p>custom_settings&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;spider&#x7684;&#x4E2A;&#x6027;&#x8BBE;&#x7F6E;&#xFF0C;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x5728;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x4E0B;&#x4F1A;&#x6709;&#x5F88;&#x591A;&#x4E2A;spider&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;settings.py&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4E3A;&#x4E86;&#x8BA9;&#x4E0D;&#x540C;&#x7684;spider&#x5E94;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;spider&#x4EE3;&#x7801;&#x4E2D;&#x52A0;&#x5165;custom_settings&#x8BBE;&#x7F6E;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF1A;</p>
<p>spiders/somespider.py</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span>custom_settings <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token keyword">class</span> <span class="token class-name">Spider1</span><span class="token punctuation">(</span>CrawlSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">&quot;spider1&quot;</span>
    custom_settings <span class="token operator">=</span> custom_settings_for_spider1
    <span class="token keyword">pass</span>
</code></pre>
<p>custom_settings.py</p>
<pre class="language-"><code class="lang-python">custom_settings_for_spider1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&apos;LOG_FILE&apos;</span><span class="token punctuation">:</span> <span class="token string">&apos;spider1.log&apos;</span><span class="token punctuation">,</span>
    <span class="token string">&apos;CONCURRENT_REQUESTS&apos;</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token string">&apos;DOWNLOADER_MIDDLEWARES&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&apos;spider.middleware_for_spider1.Middleware&apos;</span><span class="token punctuation">:</span> <span class="token number">667</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&apos;ITEM_PIPELINES&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&apos;spider.mysql_pipeline_for_spider1.Pipeline&apos;</span><span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5728;spider&#x91CC;&#x6709;&#x4E24;&#x4E2A;&#x8718;&#x86DB;spider1&#x3001;spider2&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5F15;&#x5165;&#x4E86;&#x6765;&#x81EA;custom_settings&#x7684;&#x914D;&#x7F6E;&#x53D8;&#x91CF;custom_settings_for_spider1&#x3001;custom_settings_for_spider2&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x53D8;&#x91CF;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x5BF9;&#x4E24;&#x4E2A;&#x722C;&#x866B;&#x7684;log&#x6587;&#x4EF6;&#x3001;&#x5E76;&#x53D1;&#x6570;&#x3001;&#x5E94;&#x7528;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x548C;&#x7BA1;&#x9053;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4E86;&#x8BBE;&#x7F6E;&#x3002;</p>
<p>custom_settings&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4EE5;&#x4E0B;&#xFF0C;&#x6BD4;settings.py&#x8981;&#x9AD8;&#x3002;  </p>
<h3 id="settings&#x7684;&#x4F7F;&#x7528;&#x6280;&#x5DE7;"><a name="settings&#x7684;&#x4F7F;&#x7528;&#x6280;&#x5DE7;" class="anchor-navigation-ex-anchor" href="#settings&#x7684;&#x4F7F;&#x7528;&#x6280;&#x5DE7;"><i class="fa fa-link" aria-hidden="true"></i></a>1.12.2. settings&#x7684;&#x4F7F;&#x7528;&#x6280;&#x5DE7;</h3>
<p>&#x5728;&#x8FD9;&#x7B80;&#x5355;&#x8BF4;&#x8BF4;&#x6211;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7C7B;&#x578B;settings&#x7684;&#x4F7F;&#x7528;&#x6280;&#x5DE7;&#x5427;&#x3002;</p>
<p>1.&#x9996;&#x5148;&#x662F;settings.py&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;scrapy&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x4E00;&#x4E9B;&#x901A;&#x7528;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x6BD4;&#x5982;&#x8BF7;&#x6C42;&#x5934;&#x3001;&#x4EE3;&#x7406;&#x5165;&#x53E3;&#x3001;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x7B49;&#x7B49;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x5199;&#x5728;settings.py&#x4E2D;&#x3002;</p>
<p>2.&#x5176;&#x6B21;&#x662F;custom_settings&#xFF0C;&#x5728;scrapy&#x9879;&#x76EE;&#x4E2D;&#x5355;&#x72EC;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;custom_settings.py&#x6587;&#x4EF6;&#xFF0C;&#x4F9D;&#x636E;&#x4E0D;&#x540C;spider&#x6240;&#x9700;&#x8981;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x6BD4;&#x5982;&#x67D0;&#x7AD9;&#x70B9;A&#x53EF;&#x80FD;&#x53CD;&#x722C;&#x4E25;&#xFF0C;&#x6211;&#x5E76;&#x53D1;&#x8BBE;&#x7F6E;&#x77ED;&#x70B9;&#xFF0C;&#x7AD9;&#x70B9;B&#x6CA1;&#x53CD;&#x722C;&#xFF0C;&#x6211;&#x5E76;&#x53D1;&#x8BBE;&#x7F6E;&#x9AD8;&#x70B9;&#xFF1B;&#x53C8;&#x6216;&#x8005;A&#x7528;&#x4E86;&#x4E2D;&#x95F4;&#x4EF6;MA&#xFF0C;B&#x7528;&#x4E86;&#x4E2D;&#x95F4;&#x4EF6;MB&#x7B49;&#xFF0C;&#x6211;&#x5728;custom_settings.py&#x6587;&#x4EF6;&#x4E2D;&#x5206;&#x522B;&#x7ED9;&#x4E88;&#x8BBE;&#x7F6E;&#x3002;</p>
<p>3.&#x6700;&#x540E;&#x662F;&#x547D;&#x4EE4;&#x884C;&#x3002;&#x4F8B;&#x5982;&#x6211;&#x8981;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x65E5;&#x5FD7;&#x5206;&#x522B;&#x67E5;&#x770B;&#xFF0C;&#x6216;&#x8005;&#x8FFD;&#x8E2A;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x722C;&#x53D6;&#x901F;&#x5EA6;&#x7B49;&#xFF0C;&#x8FD9;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x5C31;&#x6BD4;&#x8F83;&#x5408;&#x9002;&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">from</span> scrapy <span class="token keyword">import</span> cmdline

cmdline<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">&apos;scrapy crawl spider1 -s LOG_FILE=p1.log -s PROCESS_NAME=1&apos;</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;"><a name="&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;" class="anchor-navigation-ex-anchor" href="#&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.13. &#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;</h2>
<p>&#x7B2C;&#x4E09;&#x65B9;&#x5E93; scrapy-redis &#x4E3A;scrapy&#x6846;&#x67B6;&#x6269;&#x5C55;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x7528;redis + scrapy-redis &#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x866B;&#x6846;&#x67B6;&#x9700;&#x89E3;&#x51B3;&#xFF1A;</p>
<ol>
<li>&#x5206;&#x914D;&#x722C;&#x53D6;&#x4EFB;&#x52A1;&#xFF1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x722C;&#x866B;&#x5206;&#x914D;&#x4E0D;&#x91CD;&#x590D;&#x7684;&#x722C;&#x53D6;&#x4EFB;&#x52A1;&#x3002;</li>
<li>&#x6C47;&#x603B;&#x722C;&#x53D6;&#x6570;&#x636E;&#xFF1A;&#x5C06;&#x6240;&#x6709;&#x722C;&#x866B;&#x722C;&#x53D6;&#x5230;&#x7684;&#x6570;&#x636E;&#x6C47;&#x603B;&#x5230;&#x4E00;&#x5904;&#x3002;</li>
</ol>
<p>scrapy-redis &#x8BA9;&#x6240;&#x6709;&#x722C;&#x866B;&#x5171;&#x4EAB;&#x4E00;&#x4E2A;&#x5B58;&#x5728;&#x4E8E;redis&#x4E2D;&#x7684;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#xFF08;&#x4EE3;&#x66FF;&#x539F;&#x5148;&#x5404;&#x4E2A;&#x722C;&#x866B;&#x7684;&#x72EC;&#x7ACB;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#xFF09;&#x3002;</p>
<p>scrapy-redis &#x5B9E;&#x73B0;&#x4E86;&#x4EE5;&#x4E0B;&#x7EC4;&#x4EF6;&#xFF1A;</p>
<ol>
<li>&#x57FA;&#x4E8E;redis&#x7684;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#xFF1A;&#x4F18;&#x5148;&#x961F;&#x5217;&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#x3001;FIFO&#x3001;LIFO</li>
<li>&#x57FA;&#x4E8E;redis&#x7684;&#x8BF7;&#x6C42;&#x53BB;&#x91CD;&#x8FC7;&#x6EE4;&#x5668;&#xFF1A;&#x8FC7;&#x6EE4;&#x6389;&#x91CD;&#x590D;&#x8BF7;&#x6C42;&#x3002;</li>
<li>&#x57FA;&#x4E8E;&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x7EC4;&#x4EF6;&#x7684;&#x8C03;&#x5EA6;&#x5668;&#x3002;</li>
</ol>
<p>&#x5206;&#x5E03;&#x5F0F;&#x722C;&#x53D6;&#x4F7F;&#x7528;&#xFF1A;</p>
<ol>
<li><p>&#x4FEE;&#x6539;&#x539F;scrapy&#x9879;&#x76EE;&#x7684;&#x722C;&#x866B;&#x6587;&#x4EF6;&#xFF1A;</p>
<ol>
<li>&#x4F7F;&#x722C;&#x866B;&#x7EE7;&#x627F; &quot;scrapy_redis.spiders.RedisSpider&quot;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x539F;&#x6765;&#x7684; &quot;scrapy.Spider&quot;</li>
<li>&#x6CE8;&#x91CA;&#x6389; start_urls&#x3002;</li>
</ol>
</li>
<li><p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre class="language-"><code class="lang-python"><span class="token comment"># settings.py</span>

REDIS_URL <span class="token operator">=</span> <span class="token string">&apos;redis://1.2.3.4:6379&apos;</span>  <span class="token comment"># &#x53EF;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;</span>
SCHEDULER <span class="token operator">=</span> <span class="token string">&apos;scrapy_redis.scheduler.Scheduler&apos;</span>
DUPEFILTER_CALSS <span class="token operator">=</span> <span class="token string">&apos;scrapy_redis.dupefilter.RFPDupeFilter&apos;</span>  <span class="token comment"># &#x53BB;&#x91CD;</span>

ITEM_PIPELINES <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&apos;scrapy_redis.pipelines.RedisPipeline&apos;</span><span class="token punctuation">:</span><span class="token number">300</span>
<span class="token punctuation">}</span>

<span class="token comment"># &#x722C;&#x866B;&#x505C;&#x6B62;&#x540E;&#xFF0C;&#x662F;&#x5426;&#x6E05;&#x9664;redis&#x4E2D;&#x7684;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x3001;&#x53BB;&#x91CD;&#x96C6;&#x5408;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A;False&#xFF0C;&#x5373;&#x6E05;&#x9664;&#x3002;</span>
SCHEDULER_PERSIST <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
REDIS_START_URLS_KEYS = &apos;&lt;spider_name&gt;:start_urls&apos;  # redis&#x7684;&#x952E;&#xFF0C;&#x4ECE;&#x8BE5;&#x961F;&#x5217;&#x4E2D;&#x83B7;&#x53D6;&#x521D;&#x59CB;&#x722C;&#x53D6;&#x94FE;&#x63A5;
&#x5B58;&#x50A8;&#x722C;&#x53D6;&#x7684;item&#x952E;&#xFF1A;&apos;&lt;spider_name&gt;:items&apos;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;list
&#x5B58;&#x50A8;&#x53BB;&#x91CD;&#x96C6;&#x5408;&#x7684;&#x952E;&#xFF1A; &apos;&lt;spider_name&gt;:dupefilter&apos;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;set
&quot;&quot;&quot;</span>
</code></pre>
</li>
<li><p>&#x5C06;&#x6E90;&#x6587;&#x4EF6;&#x90E8;&#x7F72;&#x5230;&#x82E5;&#x5E72;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x5E76;&#x542F;&#x52A8;&#x722C;&#x866B;&#x3002;&#x6B64;&#x65F6;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x722C;&#x866B;&#x90FD;&#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#x3002;</p>
</li>
<li><p>&#x6253;&#x5F00;redis&#xFF0C;&#x653E;&#x5165;&#x521D;&#x59CB;&#x94FE;&#x63A5;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">lpush <span class="token operator">&lt;</span>spider_name<span class="token operator">&gt;</span>:start_urls <span class="token string">&apos;https://www.baidu.com&apos;</span>
</code></pre>
</li>
<li><p>&#x722C;&#x866B;&#x5F00;&#x59CB;&#x722C;&#x53D6;&#x6570;&#x636E;&#x3002;</p>
</li>
</ol>
<h2 id="scrapy&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;"><a name="scrapy&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;" class="anchor-navigation-ex-anchor" href="#scrapy&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;"><i class="fa fa-link" aria-hidden="true"></i></a>1.14. scrapy&#x4F7F;&#x7528;&#x6CE8;&#x91CA;&#x8FDB;&#x884C;&#x8C03;&#x8BD5;</h2>
<p>contract&#x6709;&#x70B9;&#x50CF;&#x4E3A;&#x722C;&#x866B;&#x8BBE;&#x8BA1;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x4F60;&#x5FEB;&#x901F;&#x77E5;&#x9053;&#x54EA;&#x91CC;&#x6709;&#x8FD0;&#x884C;&#x5F02;&#x5E38;&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x5728; scrapy.contracts.deafult.py&#x4E2D;&#x3002;</p>
<pre class="language-"><code class="lang-python"><span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot; This function parses a property page.
    @url http://xx.com/xx.html
    @returns items 1
    @scrapes title price description address image_urls
    @scrapes url project spider server date
    &quot;&quot;&quot;</span>
    <span class="token keyword">pass</span>
</code></pre>
<p>&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x7684;&#x542B;&#x4E49;&#x662F;&#xFF1A;&#x68C0;&#x67E5;&#x8BE5;url&#xFF0C;&#x5E76;&#x627E;&#x5230;&#x5217;&#x51FA;&#x5B57;&#x6BB5;&#x4E2D;&#x6709;&#x503C;&#x7684;&#x4E00;&#x4E2A;item&#x3002;</p>
<p>&#x6D4B;&#x8BD5;&#x67D0;&#x4E2A;&#x722C;&#x866B;&#xFF08;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x6CE8;&#x91CA;&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">scrapy check <span class="token operator">&lt;</span>spider_name<span class="token operator">&gt;</span>
</code></pre>
<h2 id="&#x722C;&#x866B;&#x90E8;&#x7F72;"><a name="&#x722C;&#x866B;&#x90E8;&#x7F72;" class="anchor-navigation-ex-anchor" href="#&#x722C;&#x866B;&#x90E8;&#x7F72;"><i class="fa fa-link" aria-hidden="true"></i></a>1.15. &#x722C;&#x866B;&#x90E8;&#x7F72;</h2>
<p>Scrapyd&#x662F;&#x5B98;&#x65B9;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x7528;&#x4E8E;&#x90E8;&#x7F72;&#x3001;&#x8FD0;&#x884C;&#x548C;&#x7BA1;&#x7406;scrapy&#x7684;&#x5DE5;&#x5177;&#x3002;scrapyd&#x6CA1;&#x6709;&#x6743;&#x9650;&#x7BA1;&#x7406;&#xFF08;&#x5373;&#x4E0D;&#x80FD;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;&#xFF09;&#x3002;</p>
<p>&#x9996;&#x5148;&#x5148;&#x5C06;scrapyd&#x5B89;&#x88C5;&#x5728;&#x4E91;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">pip <span class="token function">install</span> scrapyd
pip <span class="token function">install</span> scrapyd-client
</code></pre>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token comment"># /etc/scrapyd/scrapyd.conf</span>
<span class="token punctuation">[</span>scrapyd<span class="token punctuation">]</span>

bind_address <span class="token operator">=</span> <span class="token punctuation">[</span>&#x4E91;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5916;&#x7F51;ip<span class="token punctuation">]</span>
</code></pre>
<p>&#x542F;&#x52A8;&#xFF0C;&#x76F4;&#x63A5;&#x952E;&#x5165;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">scrapyd
</code></pre>
<p>&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x4E86;&#xFF1A;<a href="http://[&#x4E91;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5916;&#x7F51;ip]:6800&#x3002;" target="_blank">http://[&#x4E91;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5916;&#x7F51;ip]:6800&#x3002;</a></p>
<p>&#x90E8;&#x7F72;&#x722C;&#x866B;&#xFF1A;</p>
<p>&#x6253;&#x5F00;&#x9879;&#x76EE;&#x7684;scrapy.cfg&#x6587;&#x4EF6;&#xFF0C;&#x5C06;&#x7B2C;10&#x884C;&#x7684;url&#x6539;&#x4E3A;&#x4E0A;&#x9762;&#x7684;url&#x3002;</p>
<p>&#x7136;&#x540E;&#x952E;&#x5165;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x90E8;&#x7F72;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash">scrapyd-deploy  <span class="token comment"># &#x5728;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x6253;&#x5F00;&#x547D;&#x4EE4;&#x884C;</span>
</code></pre>
<p>&#x542F;&#x52A8;&#x722C;&#x866B;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token function">curl</span> http://<span class="token punctuation">[</span>host<span class="token punctuation">]</span>:6800/schedule.json -d <span class="token assign-left variable">project</span><span class="token operator">=</span><span class="token punctuation">[</span>project_name<span class="token punctuation">]</span> -d <span class="token assign-left variable">spider</span><span class="token operator">=</span><span class="token punctuation">[</span>spider_name<span class="token punctuation">]</span>
</code></pre>
<p>&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x7F51;&#x9875;&#x4E0A;&#x67E5;&#x770B;&#x76F8;&#x5173;&#x60C5;&#x51B5;&#x4E86;&#x3002;</p>
<p>&#x7ED3;&#x675F;&#x722C;&#x866B;&#xFF1A;</p>
<pre class="language-"><code class="lang-bash"><span class="token function">curl</span> http://<span class="token punctuation">[</span>host<span class="token punctuation">]</span>:6800/cancel.json -d <span class="token assign-left variable">project</span><span class="token operator">=</span><span class="token punctuation">[</span>project_name<span class="token punctuation">]</span> -d <span class="token assign-left variable">spider</span><span class="token operator">=</span><span class="token punctuation">[</span>spider_job_id<span class="token punctuation">]</span>
</code></pre>
<h2 id="telnet"><a name="telnet" class="anchor-navigation-ex-anchor" href="#telnet"><i class="fa fa-link" aria-hidden="true"></i></a>1.16. telnet</h2>
<p>telnet &#x76D1;&#x6D4B;&#x722C;&#x866B;&#x8FD0;&#x884C;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;python&#x4EE3;&#x7801;</p>
<p>&#x8FDE;&#x63A5;telnet&#xFF1A;<code>telnet localhost 6023(or 6024)</code></p>
<p>&#x5E38;&#x7528;&#x547D;&#x4EE4;&#xFF1A;</p>
<ul>
<li><code>est ( )</code> :  &#x67E5;&#x770B;&#x722C;&#x866B;&#x5F15;&#x64CE;&#x5404;&#x7EC4;&#x4EF6;&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;</li>
<li><code>p(stats.get_stats())</code>  &#xFF1A;&#x67E5;&#x770B;&#x722C;&#x866B;&#x5DF2;&#x7ECF;&#x8FD0;&#x884C;&#x7684;&#x5404;&#x9879;&#x6307;&#x6807;</li>
</ul>
<p>:coffee: :zapple</p>
<footer class="page-footer"><span class="copyright">Copyright @appwhy all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x6587;&#x4EF6;&#x66F4;&#x65B0;&#x4E8E;&#xFF1A;
2020-04-06 14:33:19
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="requests.html" class="navigation navigation-prev " aria-label="Previous page: requests">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="常见问题.html" class="navigation navigation-next " aria-label="Next page: 常见问题">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"scrapy","level":"5.1.3","depth":2,"next":{"title":"常见问题","level":"5.1.4","depth":2,"path":"爬虫/常见问题.md","ref":"爬虫/常见问题.md","articles":[]},"previous":{"title":"requests","level":"5.1.2","depth":2,"path":"爬虫/requests.md","ref":"爬虫/requests.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-pro","-sharing","-highlight","prism","prism-themes","code","github","mermaid-gb3","splitter","anchor-navigation-ex","3-ba","splitter","simple-page-toc","tbfed-pagefooter"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright @appwhy","modify_label":"文件更新于：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prism-themes/themes/prism-base16-ateliersulphurpool.light.css"]},"github":{"url":"https://github.com/appwhy"},"simple-page-toc":{},"splitter":{},"search-pro":{},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"mermaid-gb3":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"prism-themes":{},"3-ba":{"configuration":"auto","token":"20b05c51dc78c5786b84d16d003150ac"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"appwhy","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"introduction.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"python_book","language":"zh-hans","links":{"sidebar":{"Home":"https://github.com/appwhy"}},"gitbook":"*","description":"记录python知识点"},"file":{"path":"爬虫/scrapy.md","mtime":"2020-04-06T06:33:19.108Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-06-26T13:42:43.065Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-3-ba/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    <script src="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>

